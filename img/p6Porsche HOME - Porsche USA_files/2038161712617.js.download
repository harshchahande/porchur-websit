if(!STRY){var STRY = {};}
STRY.config_12617 = {"app_name": "*New* Porsche Live | Mosaic", "fallback_channel_id": false, "custom_analytics_dimensions": [{"value": "storystream", "key": "46"}], "can_tab_expanded_content": true, "analytics": {"version": "v2", "id": "UA-37168818-1"}, "ratio_layout": "square", "api": {"story": "pcna-ugc", "workflow_state": "live", "story_id": "1617", "app_id": "12617", "environment": "//content.storystream.ai", "channel_id": "5d403449b44caf09374f430a", "token": "a230fcc1a6311c7825160aa3390218079fd52a59", "version": "v4", "type": "channel", "channel_name": "Porsche Live (Homepage)"}, "locked_ratio_mode": false, "filters": {"show": false}, "dynamic_ga_tracker": true, "smartgoals_same_window": false, "app_type": "storyboard", "max_columns": 3, "seo_utils_enabled": false, "breakpoints": [{"width": 480, "rows": 1, "columns": 1}, {"width": 760, "rows": 1, "columns": 2}, {"width": 1200, "rows": 1, "columns": 3}], "theme": "advanced", "smartgoals_always_visible": true, "show_popup_brand_messages": false, "element_id": "stry-wrapper", "type": "grid", "previewMode": false, "templates": {"version": "1.1.0", "html": {"item": "html/item.html", "popup": "html/popup-item.html", "custom_story_item_popup": "html/story-popup-item.html", "menu": "html/menu.html"}, "css": "styles.css", "location": "//s3-eu-west-1.amazonaws.com/templates.storystream.it/grid/{theme}/{version}/"}, "hasDeeplink": true, "sharing": {"app_type": "mosaic", "url_query": "rel=mosaic~12617", "embed_url": "https://www.porsche.com/usa/", "app_id": "12617", "analytics_page": "/PCNA/pcom/home"}, "roi_enabled": true, "smartgoal_adobe_attribute_value": false, "hasDeeplinkCategories": false, "stylesheets": "@import url(\"https://d7c4jjeuqag9w.cloudfront.net/custom/porsche/styles.css\");\n\n\n\n\nbody .stry-grid-layout .stry-popup a {\n\n    font-weight: 400!important;\n\n}\n/*VIDEO CONTENT FILLING FULL SQUARE*/\n.stry-grid-layout #stry-grid .stry-video-instagram .stry-video-container video{\n    object-fit:cover!important;\n}\n/*END VIDEO CONTENT FILLING FULL SQUARE*/\n", "storystream_credit": {"inline": {"colour": "dark", "enabled": false}, "expanded": {"colour": "light", "enabled": false}}, "useCloudinaryDerivatives": true, "fallback_language_code": null, "isChina": false, "gutter": 8, "transition_interval": 7000, "no_base_cookies": false, "cookie_killswitch": false, "transitions_enabled": true, "car_crop": true, "limit": 14, "mosaic": true, "customCloudinaryPreviewTransform": "smart_auto_crop", "track_storyboard_interactions": true, "show_grid_brand_messages": false};
window.STRY||(window.STRY={}),function(e,t,a){!function(){"use strict";var e={version:"1.0.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:a,compile:a};function t(){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},t=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(t,(function(t){return e[t]||t})):this}}"undefined"!=typeof module&&module.exports?module.exports=e:(function(){return this||(0,eval)("this")}()).doT=e,String.prototype.encodeHTML=t();var r={append:{start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},split:{start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"}},i=/$^/;function s(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}e.template=function(a,n,o){var l,c,d=(n=n||e.templateSettings).append?r.append:r.split,u=0,p=n.use||n.define?function e(t,a,r){return("string"==typeof a?a:a.toString()).replace(t.define||i,(function(e,a,i,s){return 0===a.indexOf("def.")&&(a=a.substring(4)),a in r||(":"===i?(t.defineParams&&s.replace(t.defineParams,(function(e,t,i){r[a]={arg:t,text:i}})),a in r||(r[a]=s)):new Function("def","def['"+a+"']="+s)(r)),""})).replace(t.use||i,(function(a,i){t.useParams&&(i=i.replace(t.useParams,(function(e,t,a,i){if(r[a]&&r[a].arg&&i){var s=(a+":"+i).replace(/'|\\/g,"_");return r.__exp=r.__exp||{},r.__exp[s]=r[a].text.replace(new RegExp("(^|[^\\w$])"+r[a].arg+"([^\\w$])","g"),"$1"+i+"$2"),t+"def.__exp['"+s+"']"}})));var s=new Function("def","return "+i)(r);return s?e(t,s,r):s}))}(n,a,o||{}):a;p=("var out='"+(n.strip?p.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):p).replace(/'|\\/g,"\\$&").replace(n.interpolate||i,(function(e,t){return d.start+s(t)+d.end})).replace(n.encode||i,(function(e,t){return l=!0,d.start+s(t)+d.endencode})).replace(n.conditional||i,(function(e,t,a){return t?a?"';}else if("+s(a)+"){out+='":"';}else{out+='":a?"';if("+s(a)+"){out+='":"';}out+='"})).replace(n.iterate||i,(function(e,t,a,r){return t?(u+=1,c=r||"i"+u,t=s(t),"';var arr"+u+"="+t+";if(arr"+u+"){var "+a+","+c+"=-1,l"+u+"=arr"+u+".length-1;while("+c+"<l"+u+"){"+a+"=arr"+u+"["+c+"+=1];out+='"):"';} } out+='"})).replace(n.evaluate||i,(function(e,t){return"';"+s(t)+"out+='"}))+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+="),l&&n.selfcontained&&(p="String.prototype.encodeHTML=("+t.toString()+"());"+p);try{return new Function(n.varname,p)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+p),e}},e.compile=function(t,a){return e.template(t,null,a)}}();!function(){function a(e){return new a.fn.init(e)}function r(t,a,r){if(!r.contentWindow.postMessage)return!1;var i=r.getAttribute("src").split("?")[0];t=JSON.stringify({method:t,value:a});"//"===i.substr(0,2)&&(i=e.location.protocol+i),r.contentWindow.postMessage(t,i)}function i(e){var t,a;try{a=(t=JSON.parse(e.data)).event||t.method}catch(e){}if("ready"==a&&!o&&(o=!0),e.origin!=l)return!1;e=t.value;var r=t.data,i=""===i?null:t.player_id;return t=i?n[i][a]:n[a],a=[],!!t&&(void 0!==e&&a.push(e),r&&a.push(r),i&&a.push(i),0<a.length?t.apply(null,a):t.call())}function s(e,t,a){a?(n[a]||(n[a]={}),n[a][e]=t):n[e]=t}var n={},o=!1,l="";a.fn=a.prototype={element:null,init:function(a){"string"==typeof a&&(a=t.getElementById(a)),this.element=a,"//"===(a=this.element.getAttribute("src")).substr(0,2)&&(a=e.location.protocol+a);for(var r="",i=0,s=(a=a.split("/")).length;i<s&&3>i;i++)r+=a[i],2>i&&(r+="/");return l=r,this},api:function(e,t){if(!this.element||!e)return!1;var a=this.element,i=""!==a.id?a.id:null,n=t&&t.constructor&&t.call&&t.apply?null:t,o=t&&t.constructor&&t.call&&t.apply?t:null;return o&&s(e,o,i),r(e,n,a),this},addEvent:function(e,t){if(!this.element)return!1;var a=this.element,i=""!==a.id?a.id:null;return s(e,t,i),"ready"!=e?r("addEventListener",e,a):"ready"==e&&o&&t.call(null,i),this},removeEvent:function(e){if(!this.element)return!1;var t,a=this.element;e:{if((t=""!==a.id?a.id:null)&&n[t]){if(!n[t][e]){t=!1;break e}n[t][e]=null}else{if(!n[e]){t=!1;break e}n[e]=null}t=!0}"ready"!=e&&t&&r("removeEventListener",e,a)}},a.fn.init.prototype=a.fn,e.addEventListener?e.addEventListener("message",i,!1):e.attachEvent("onmessage",i),e.Froogaloop=e.$f=a}();function r(){var e,a=this,r=!1,i=!1,n=!1;function o(e){return"storyboard"==e.params.app_type&&0==e.items.length&&"live-video"!==e.params.type||"storyboard"==e.params.app_type&&e.items.length<e.layout.currentMinimumContent&&"live-video"!==e.params.type}a.init=function(t){t.params&&(e=t.params),!t.params||void 0!==t.params.track_storyboard_interactions&&!0!==t.params.track_storyboard_interactions||(t.addEventListener("onViewed",(function e(i){r||o(t)||(r=!0,a.track("Storyboard, View")),t.removeEventListener("onViewed",e)})),t.addEventListener("onHovered",(function e(){i||o(t)||(i=!0,a.track("Storyboard, Hover")),t.removeEventListener("onHovered",e)})),t.addEventListener("onEngagedView",(function e(r){n||o(t)||(n=!0,a.track("Storyboard, engagedView")),t.removeEventListener("onEngagedView",e)})),t.addEventListener("onDirectDeeplink",(function(e){a.track("Content Item, click, "+e.detail.id)})))},a.track=function(a){var r=Object.keys(e.adobe_analytics_config).map((function(t){return e.adobe_analytics_config[t]})).join(","),i=t.getElementsByTagName("title")[0].text;if(event&&event.target){if(Array.isArray(a))var n=a;else n=a.split(",");var o=n[2];if(n[1].length>=5)var l=n[1].replace(/([A-Z])/g," $1");else l=n[1];var c=n[0]?n[0]+" "+l:event.type;c=c.replace(/  +/g," ");var d=event.target.getAttribute("href");if(d){smartgoal_data_segments=event.target.dataset.stryTrack.split("/");var u=smartgoal_data_segments.slice(-1)[0];o=smartgoal_data_segments.slice(-1)[2]}}r&&(s.linkTrackVars=r),i&&(s[e.adobe_analytics_config.pagename]=i),e.api.app_id&&(s[e.adobe_analytics_config.app_id]=e.api.app_id),c&&(s[e.adobe_analytics_config.event_type]=c.toLowerCase()),o&&(s[e.adobe_analytics_config.content_id]=o),o&&"live video show video time watched"==c&&(s[e.adobe_analytics_config.content_id]="",s[e.adobe_analytics_config.lvs_show_time_watched]=o),d?(s[e.adobe_analytics_config.smg_url_name]=d,s[e.adobe_analytics_config.smart_goal_type]=u):(s[e.adobe_analytics_config.smg_url_name]="",s[e.adobe_analytics_config.smart_goal_type]=""),s.tl(!0,"o","stry event")}}function i(){var r,i,s,n=this,o=!1,l=3,c=5,d=!1,u=!1,p=!1,m=!1,f=!1;function _(t,i,s,l){!function(t,i){if(!o)return!1;if(t>=c)return!1;if(e.GoogleAnalyticsObject==a)return!1;if(e[e.GoogleAnalyticsObject]==a)return!1;if(i)return!1;if(r.dynamic_ga_tracker&&!m&&!f)return!1;return!0}(i,s)?setTimeout((function(){_(t,i+1,!1,l)}),500):(n.track(t,l),s=!0)}function g(a){var s,n=-1!==t.domain.indexOf(".stystm");("off"===STRY.util.getQueryString("analytics")&&(n=!1),a||r.dynamic_ga_tracker)||function(e,t,a,r,i,s,n){e.GoogleAnalyticsObject=i,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,s=t.createElement(a),n=t.getElementsByTagName(a)[0],s.async=1,s.src=r,n.parentNode.insertBefore(s,n)}(e,t,"script","//www.google-analytics.com/"+(n?"analytics_debug":"analytics")+".js","ga");r.analytics.id=r.override_analytics_property?r.override_analytics_property:r.analytics.id,"v2"!=r.analytics.version||"v2"==r.analytics.version&&!a&&!r.dynamic_ga_tracker?(!function(a,s){switch(y(a,i,r),s){case"v2":r.hasOwnProperty("custom_analytics_dimensions")&&r.custom_analytics_dimensions.length&&S(i,r.custom_analytics_dimensions),r.prevent_page_view_firing||e[e.GoogleAnalyticsObject](i+".send","pageview");break;default:e[e.GoogleAnalyticsObject](i+".set","dimension1",r.api.story),e[e.GoogleAnalyticsObject](i+".set","dimension2",r.sharing.app_type),e[e.GoogleAnalyticsObject](i+".set","dimension3",r.sharing.app_id),e[e.GoogleAnalyticsObject](i+".set","dimension4",t.domain),e[e.GoogleAnalyticsObject](i+".set","dimension5",e.location.pathname+e.location.search),e[e.GoogleAnalyticsObject](i+".set","dimension6",e.location.hash),r.prevent_page_view_firing||e[e.GoogleAnalyticsObject](i+".send","pageview")}}(r.analytics.id,r.analytics.version),o=!0):"v2"==r.analytics.version&&a&&(s=r.analytics.id,e[e.GoogleAnalyticsObject]((function(){for(var t,a=e[e.GoogleAnalyticsObject].getAll(),n=a.length,o=!1,l=r.native_tracker_name?r.native_tracker_name:null;n--;)(t=a[n]).get("name")!==i&&(t.get("trackingId")===s&&(o=!0,t.get("name")==l&&(i=t.get("name"))),r.dynamic_ga_tracker&&(t.get("trackingId")&&0!==t.get("name").indexOf("gtm")&&(i=t.get("name"),s=t.get("trackingId"),m=!0),0!=n||m||(i="stst_tracker",s=t.get("trackingId"),f=!0)));o||r.dynamic_ga_tracker?(o&&i!==l&&!r.dynamic_ga_tracker||f)&&y(s,i,r):(y(s,i,r),r.prevent_page_view_firing||e[e.GoogleAnalyticsObject](i+".send","pageview"))})),o=!0)}function y(t,a,r){var i={name:a,cookieDomain:"auto",cookieFlags:"secure;samesite=none"};r.cookieless_analytics&&(i.storage="none");try{e[e.GoogleAnalyticsObject].remove(i.name)}catch{}e[e.GoogleAnalyticsObject]("create",t,i),e[e.GoogleAnalyticsObject](i.name+".set","anonymizeIp",!0),r.ga_remove_search_parameters&&function(t){e[e.GoogleAnalyticsObject](t+".set","page",e.location.href.split(e.location.search)[0]),e[e.GoogleAnalyticsObject](t+".set","location",e.location.href.split(e.location.search)[0])}(i.name),r.hasOwnProperty("custom_analytics_dimensions")&&r.custom_analytics_dimensions.length&&S(i.name,r.custom_analytics_dimensions),r.optimize_container_id&&e[e.GoogleAnalyticsObject](i.name+".require",r.optimize_container_id)}function h(e,t){return e=void 0===t||t?i+".send, event, "+e+", {useBeacon: true}":i+".send, event, "+e+", {useBeacon: true, nonInteraction: true}",JSON.parse(e)}function v(e,t){for(var a=(e=i+".send, event, "+e).split(","),n=a.length;n--;)a[n]=a[n].trim();if(r.analytics.version)for(s[a[3].toLowerCase()]&&s[a[3].toLowerCase()][a[2].toLowerCase()]?a[3]=s[a[3].toLowerCase()][a[2].toLowerCase()]:a[3]=a[2]+" "+a[3],a[2]="storystream_"+r.api.story+"_"+r.sharing.app_id,n=a.length;n--;)a[n]=a[n].toLowerCase();return void 0===t||t?a.push({useBeacon:!0}):a.push({nonInteraction:!0,useBeacon:!0}),a}function S(t,a){for(var r=0;r<a.length;r++)e[e.GoogleAnalyticsObject](t+".set","dimension"+a[r].key,a[r].value)}function b(e){return"storyboard"==e.params.app_type&&0==e.items.length||"storyboard"==e.params.app_type&&e.items.length<e.layout.currentMinimumContent}n.init=function(t){t.params&&((r=t.params).ga_domain_property&&function(t){var a=e.location.host;for(var[r,i]of Object.entries(t.ga_domain_property)){if(r==a||"www."+r==a){t.analytics.id=i;break}t.analytics.id=t.analytics.id}}(r),i=r.native_tracker_name?r.native_tracker_name:"storystream_tracker_"+r.sharing.app_id,s=function(e){switch(e){case"v2":return{click:{"content item":"content item click",smartgoal:"smartgoal click",controls:"control click",filter:"filter click","direct upload":"direct upload click","asset upload":"asset upload click","download asset":"download asset click","item selected":"item selected click"},share:{twitter:"content item share twitter",facebook:"content item share facebook",pinterest:"content item share pinterest",email:"content item share email",linkedin:"content item share linkedin","google+":"content item share google+"},view:{storyboard:"storyboard view"},hover:{storyboard:"storyboard hover"},engagedview:{storyboard:"storyboard engaged view"},tab:{"content item":"content item tab"}}}}(r.analytics.version),l=r.analyticsAttemptsLimit?r.analyticsAttemptsLimit:3,function t(i){if(o||r.analytics_init_wait)setTimeout((function(){g(!0)}),r.analytics_init_wait);else if(i<l||r.dynamic_ga_tracker){if(e.GoogleAnalyticsObject!==a&&e[e.GoogleAnalyticsObject]!==a)return void g(!0);setTimeout((function(){t(i+1)}),500)}else g(!1)}(0)),!t.params||void 0!==t.params.track_storyboard_interactions&&!0!==t.params.track_storyboard_interactions||(t.addEventListener("onViewed",(function e(a){d||b(t)||(d=!0,_("Storyboard, View",0,!1,a.detail.isInteractive)),t.removeEventListener("onViewed",e)})),t.addEventListener("onHovered",(function e(){u||b(t)||(u=!0,_("Storyboard, Hover",0,!1)),t.removeEventListener("onHovered",e)})),t.addEventListener("onEngagedView",(function e(a){p||b(t)||(p=!0,_("Storyboard, engagedView",0,!1,a.detail.isInteractive)),t.removeEventListener("onEngagedView",e)})),t.addEventListener("onDirectDeeplink",(function(e){_("Content Item, click, "+e.detail.id,0,!1)})))},n.track=function(t,a){if(o){if(!t)return;var r,i;try{JSON.parse(t),r=h}catch(e){r=v}if(i=r(t,a),!e[e.GoogleAnalyticsObject])return;e[e.GoogleAnalyticsObject].apply(this,i)}}}function n(){var a=this,r=null,i=null,s=null,n={"Content Item,click":{name:"StoryStream Content Item Click",type:"view_item",item:{item_id:0}},"Content Item,tab":{name:"StoryStream Content Item Tab",type:"view_item",item:{item_id:0}},"SmartGoal,click":{name:"StoryStream Smart Goal Click",type:"select_promotion",item:{item_id:0,item_name:1,item_variant:2}},"Twitter,share":{name:"StoryStream Share",type:"share",item:{item_id:0,item_name:"Twitter"}},"Facebook,share":{name:"StoryStream Share",type:"share",item:{item_id:0,item_name:"Facebook"}},"LinkedIn,share":{name:"StoryStream Share",type:"share",item:{item_id:0,item_name:"LinkedIn"}},"Email,share":{name:"StoryStream Share",type:"share",item:{item_id:0,item_name:"Email"}},"Load more":{name:"StoryStream Storyboard Load More",type:"view_item_list"}};function o(){dataLayer.push(arguments)}e.dataLayer=e.dataLayer||[];var l=()=>{o("js",new Date),s.no_base_cookies&&o("consent","default",{ad_storage:"denied",analytics_storage:"denied"}),o("config",r)},c=e=>e.items.length>0||e.items.length>=e.layout.currentMinimumContent;a.init=e=>{s=e.params,r=s.canDualWriteGA?s.GA4ID:s.analytics.id,i=s.api.app_id,t.querySelector('script[src$="//https://www.googletagmanager.com/gtag/js?id='+r+"]")||(()=>{var e=t.createElement("script");e.type="text/javascript",e.src="https://www.googletagmanager.com/gtag/js?id="+r,t.body.appendChild(e),l()})(),e.addEventListener("onViewed",(function t(){c(e)&&(a.track(null,"storystream_storyboard_view","StoryStream Storyboard View","view_item_list"),e.removeEventListener("onViewed",t))})),e.addEventListener("onEngagedView",(function t(){c(e)&&(a.track(null,"storystream_storyboard_engaged_view","StoryStream Storyboard Engaged View","view_item_list"),e.removeEventListener("onEngagedView",t))})),e.addEventListener("onHovered",(function t(){c(e)&&(a.track(null,"storystream_storyboard_hover","StoryStream Storyboard Hover","view_item_list"),e.removeEventListener("onHovered",t))})),e.addEventListener("onDirectDeeplink",()=>{this.track(null,"storystream_storyboard_direct_deeplink","StoryStream Storyboard Direct Deeplink","view_item")})},a.track=(e,t,a,s)=>{var l=null,c=null,d=[];if(e&&(Array.isArray(e)&&(e=e.join(", ")),e.includes(",")?(l=e.split(", ").slice(0,2).join(),c=e.split(", ")[2].split("/")):l=e),l&&n.hasOwnProperty(l)&&(a=n[l].name,n[l].id,s=n[l].type,n[l].item)){var u={};for(const[e,t]of Object.entries(n[l].item))Number.isInteger(t)?u[e]=c[t]:u[e]=t;d.push(u)}o("event",s,{item_list_id:i,item_list_name:a,items:d,send_to:r})}}function o(){var t=this,a=!1,r=!1,i=e.vwdata||null,s=e.digitalData||null,n=!1,o=null,l=null;function c(e){return"storyboard"==e.params.app_type&&0==e.items.length||"storyboard"==e.params.app_type&&e.items.length<e.layout.currentMinimumContent}function d(e){for(var t=[321,480,560,768,960,1200,1280,1600,2560],a=0;a<=t.length;a++){if(void 0===t[a+1])return t[a]+"";if(e>t[a]&&e<t[a+1])return t[a]+""}}t.init=function(e){if(e.params&&(void 0===e.params.track_storyboard_interactions||!0===e.params.track_storyboard_interactions)){if(n=e.params.app_name,2087==(l=e.params.api.story_id))o={onViewed:["impression","storystream - module view"],onEngagedView:["impression","storystream - module engaged view"],"Content Item,click":["click","storystream - article opened"],"Content Item,tab":["click","storystream - article opened"],"SmartGoal,click":["click","storystream - CTA click"],"Read Review,click":["click","storystream - read review click"]};else{if(2100!=l&&2549!=l)return;o={"Twitter,share":"VWBasic_SocialShare_Click","LinkedIn,share":"VWBasic_SocialShare_Click","SmartGoal,click":"VWBasic_SocialLink_Click","Facebook,share":"VWBasic_SocialShare_Click","Email,share":"VWBasic_SocialShare_Click","Content Item,tab":"VWBasic_SliderElement_Load","Pinterest,share":"VWBasic_SocialShare_Click","Content Item,click":["VWBasic_SocialLink_Click","VWBasic_Layer_Load"],onViewed:"VWBasic_Gallery_Load",onEngagedView:"VWBasic_GalleryEngagedView_Load","Read Review,click":"VWBasic_SocialLink_Click"}}o=e.params.custom_event_mapping?e.params.custom_event_mapping:o,e.addEventListener("onViewed",(function r(i){a||c(e)||(a=!0,t.track("onViewed")),e.removeEventListener("onViewed",r)})),e.addEventListener("onEngagedView",(function a(i){r||c(e)||(r=!0,t.track("onEngagedView")),e.removeEventListener("onEngagedView",a)})),e.addEventListener("onDirectDeeplink",(function(e){t.track("Content Item, tab, "+e.detail.id)}))}},t.track=function(a,r){var c,u="",p=!1,m="",f="",_="",g=a.destination_url,y=null;if(void 0!==a.title&&a.title&&(c=a.title),void 0!==a.smartgoal_text&&a.smartgoal_text&&(c=a.smartgoal_text),void 0!==a.href&&void 0!==a.action&&(_=a.href,a=a.action),"string"==typeof a&&(a=a.split(",")),a.action&&"string"==typeof a.action&&(a=a.action.split(",")),a.length>1){u=o[a[0].trim()+","+a[1].trim()];try{m=a[2].trim()}catch{}i&&("VWBasic_SocialShare_Click"==u&&(y=a[0]),"VWBasic_Teaser_Click"==u&&(f={url:e.location.href,name:m},t.track(["Content Item","tab",m])),"VWBasic_SocialLink_Click"==u&&(f={url:_,name:m}),"object"==typeof u&&u.indexOf("VWBasic_SocialLink_Click")>-1&&(f={url:g,name:"StoryStream content item"})),s&&(p=u[1],u=u[0])}else"VWBasic_LayerClose_Click"==a[0].trim()?(u=a[0].trim(),f={url:e.location.href,name:"StoryStream Layer Close"},m=r.closed_item):(u=o[a[0].trim()])&&"string"!=typeof u&&u.length>1&&(p=u[1],u=u[0],c=n);if(a&&u&&(i&&(u&&"object"!=typeof u&&(u=[u]),u.forEach(t=>{var a={eventInfo:{eventAction:t,contentId:m,pageName:e.vw_data_layer?e.vw_data_layer.page.pageName:2549==l?"Volkswagen UK |  The official Volkswagen website":"life : magazine",pageId:e.location.href,brand:2549==l?"commercial":"passenger"},environment:{language:"en",country:"GB",featureAppId:2549==l?"StoryStream-VWN-D6-UK":"StoryStream-D6-UK",featureAppIdAppVersion:"1.1"},user:{browserResolutionHeight:e.innerHeight+"",browserResolutionWidth:e.innerWidth+"",browserResolutionOrientation:e.innerHeight<e.innerWidth?"h":"v",browserResolutionBreakpoint:d(e.innerWidth)}};a.environment.applicationId="VWCMSD6",f&&"VWBasic_Layer_Load"!==t&&(a.link=f),y&&(a.social=[],a.social.Platform=y),i.push(a)})),s)){var h={eventInfo:{eventAction:u,eventName:p},attributes:{componentName:"storystream",label:c}};(_||g)&&(h.attributes.targetURL=_||g),s.event.push(h)}}}function l(e){var t="//{sub_domain}.cloudfront.net/",a={detail:"t_detail/",preview:"t_preview/",carousel:"t_carousel/",emm_carousel:"t_emm_carousel/"},r={portrait:"d2z3xezg2yr13f",landscape:"d1qaslvk445j9a",square:"d2h5xeim3950up"},i={portrait:"d1cnb6xktgk46g",landscape:"d32hn0yls9aacg",square:"d3nlehdvzxvlz6"},s={square:"d2ybnotg3p35l0"},n="d1m9n8rb7nznh0";this.available=function(e){var t=-1!=e.indexOf("d1sdeqoxcfgxl0.cloudfront.net"),a=-1!=e.indexOf("cdninstagram.com");return!(!t&&!a)},this.get_simple_urls=function(e,t){var a={};for(const r in t.customCloudinaryTransforms)a[r]="//d2vykwbochoala.cloudfront.net/"+t.customCloudinaryTransforms[r]+"/"+e;return a},this.get_urls=function(o,l,c,d){var u,p,m,f,_={};if((f="d2vykwbochoala")||(f="res"),u=e.formatter.string(t,{sub_domain:f}),l.car_crop&&l.locked_ratio_mode&&l.ratio_layout&&c){var g,y="";switch(void 0!==l.bespoke_cdn_url&&l.bespoke_cdn_url&&(r=l.bespoke_cdn_url.small_locked_ratio_cdns,i=l.bespoke_cdn_url.large_locked_ratio_cdns),c){case 320:g=r;break;case 420:g=i;break;case 480:g=s}if(g)switch(l.ratio_layout){case"square":case"portrait":case"landscape":y=g[l.ratio_layout]}p=l.bespoke_cdn_url?y:e.formatter.string(t,{sub_domain:y})}var h=o.substring(o.lastIndexOf("/"));for(m in a)l.bespoke_cdn_url?l.locked_ratio_mode&&l.car_crop&&("preview"==m||"customPreview"==m)?_[m]=p+h:_[m]=l.bespoke_cdn_url[m]+h:(o=o.replace("?","%3F"),("preview"==m||"customPreview"==m)&&l.locked_ratio_mode&&l.car_crop?l.device_pixel_ratio?_[m]=p+"dpr_"+l.device_pixel_ratio+"/"+o:_[m]=p+o:"preview"!=m&&"customPreview"!=m||!l.carousel_crop||"storyboard"!=l.app_type||"carousel"!=l.type?l.device_pixel_ratio?_[m]=u+a[m]+"dpr_"+l.device_pixel_ratio+"/"+o:_[m]=u+a[m]+o:(p=e.formatter.string(t,{sub_domain:n}),l.device_pixel_ratio?_[m]=p+"dpr_"+l.device_pixel_ratio+"/"+o:_[m]=p+o));return"digital-magazine"==l.type||"news-hub"==l.type?(_.preview=d?l.car_crop?_.preview.replace("/t_preview/","/c_fill,g_auto:car,h_800,w_1200/"):_.preview.replace("/t_preview/","/c_fill,g_auto,h_800,w_1200/"):l.car_crop?_.preview.replace("/t_preview/","/c_fill,g_auto:car,h_450,w_450/"):_.preview.replace("/t_preview/","/c_fill,g_auto,h_450,w_450/"),l.customCloudinaryDetailTransform?(_.digital_magazine_small=_.detail.replace("/t_detail/",l.customCloudinaryDetailTransform.small),_.digital_magazine_large=_.detail.replace("/t_detail/",l.customCloudinaryDetailTransform.large)):(_.digital_magazine_small=_.detail.replace("/t_detail/","/w_900,c_limit/"),_.digital_magazine_large=_.detail.replace("/t_detail/","/w_2000,c_limit/"))):l.customCloudinaryDetailTransform&&(_.detail=_.detail.replace("/t_detail/",l.customCloudinaryDetailTransform.large)),_},this.set_custom_preview_transform=function(e){a.customPreview="t_"+e+"/"}}function c(){this.set=function(e,a,r,i){if(e&&a&&r){var s="";if(r){var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3),s="; expires="+n.toUTCString()}t.cookie=i?e+"="+(a||"")+s+";domain="+i+";path=/":e+"="+(a||"")+s+";path=/"}},this.get=function(e){for(var a=e+"=",r=t.cookie.split(";"),i=0;i<r.length;i++){for(var s=r[i];" "==s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(a))return s.substring(a.length,s.length)}return null},this.remove=function(e){t.cookie=e+"=; Max-Age=-99999999;"}}function d(r){if(!(this instanceof d))return new d(r||{});if(r){var i,s=this;s.has_viewed=!1,s.is_out_of_view=!1,s.has_engaged_viewed=!1,s.view_timer=a,s.engaged_view_timer=a;var n=function(n){var o,l;switch(!(!(n=n||e.event)||!n.type)&&n.type){case"documentIsReady":case"touchmove":case"scroll":case"storyboardRendered":s.has_viewed&&s.has_engaged_viewed||function(i){var n=STRY.util.isIE();if(!n||n>8){var o=r.el.getBoundingClientRect(),l=t.documentElement,c=o.top<=(e.innerHeight||l.clientHeight)/2,d=e.pageYOffset!==a?e.pageYOffset:(t.documentElement||t.body.parentNode||t.body).scrollTop;c&&!s.view_timer&&(s.view_timer=setTimeout((function(){s.has_viewed=!0,STRY.util.transmit(r,"onViewed",{event:i,isInteractive:d>0})}),100)),c&&!s.engaged_view_timer&&(s.engaged_view_timer=setTimeout((function(){s.has_engaged_viewed=!0,STRY.util.transmit(r,"onEngagedView",{event:i,isInteractive:d>0})}),5e3)),c||(clearTimeout(s.view_timer),clearTimeout(s.engaged_view_timer),s.view_timer=a,s.engaged_view_timer=a)}}(n),s.has_viewed&&(o=r.el.getBoundingClientRect(),l=o.x+o.width<0||o.y+o.height<0||o.x>e.innerWidth||o.y>e.innerHeight,s.is_out_of_view!=l&&(s.is_out_of_view=l,s.is_out_of_view?STRY.util.transmit(r,"onOutOfView",{}):STRY.util.transmit(r,"onEnterView",{})));break;case"mouseover":i=setTimeout((function(){STRY.util.transmit(r,"onHovered",{event:n})}),100);break;case"mouseout":clearTimeout(i);break;case"onClicked":var c=n.detail.target.getAttribute("data-stry-track");c&&c.toLowerCase().indexOf("smartgoal")>=0&&STRY.util.transmit(r,"onSmartGoalClick",{target:n.detail.target,event:n,data:n.detail.data})}};r.el&&(r.addEventListener("documentIsReady",n),r.addEventListener("onClicked",n),r.el.addEventListener("mouseover",n),r.el.addEventListener("mouseout",n),r.addEventListener("storyboardRendered",n),e.addEventListener("scroll",STRY.util.debounce(n,200,!1,[{type:"scroll"}]),{capture:!0,passive:!0}),r.hasTouchEvents&&t.addEventListener("touchmove",STRY.util.debounce(n,200),{capture:!0,passive:!0}))}else STRY.util.error("StoryStream -> SDK -> StoryInteractions -> Scope for displaying must be defined.")}function u(t){if(!(this instanceof u))return new u(t||{});if(t){var a=function(t){switch(!!(t=t||e.event).type&&t.type){case"onClicked":r(t)}},r=function(e){var t=e.detail.target||e.srcElement,a=STRY.util.getDataAttribute(t,STRY.resources.data_action);if(a.action)switch(a.action){case"control-fade-carousel":i(t)}},i=function(e){var t=0,a=1;STRY.util.hasClass(e,STRY.resources.class_fade_carousel_previous)&&(a=0);for(var r=STRY.util.getClosest(e,(function(e){return STRY.util.hasClass(e,STRY.resources.class_fade_carousel)})).querySelectorAll("."+STRY.resources.class_fade_carousel_item),i=r.length,s=0;s<i;s++)STRY.util.hasClass(r[s],STRY.resources.class_fade_carousel_active_item)&&(t=s,STRY.util.removeClass(r[s],STRY.resources.class_fade_carousel_active_item));a?(t+=1)==i&&(t=0):(t-=1)<0&&(t=i-1),STRY.util.addClass(r[t],STRY.resources.class_fade_carousel_active_item)};return t.addEventListener("onClicked",a),this}STRY.util.error("StoryStream -> SDK -> StoryFadeCarousel -> Scope for displaying must be defined.")}function p(t,a){if(!(this instanceof p))return new p(t,a||{});var r=this;r.el=t,this.enableMediaCarousel=function(){if(r.el){var e=o();if(e&&!(e.length<2))try{e[0].querySelectorAll("video")[0].setAttribute("tabindex",-1)}catch{}}},this.actionMediaCarouselButton=function(e){STRY.util.hasClass(e,"stry-media-carousel-prev")&&n("backward"),STRY.util.hasClass(e,"stry-media-carousel-next")&&n("forward"),STRY.util.hasClass(e,"stry-media-carousel-ticker-button")&&n("forward",e.getAttribute("data-stry-media-carousel-ticker-index"))};var i=function(t){switch(!!(t=t||e.event).type&&t.type){case"click":s(t);break;case"stryCarouselTickerClick":r.actionMediaCarouselButton(t.detail.target.element)}},s=function(e){var t=e.target||e.srcElement,a=STRY.util.getDataAttribute(t,STRY.resources.data_action);if(a.action)switch(a.action){case"control-media-carousel":r.actionMediaCarouselButton(t)}};function n(e,t){var a=o(),i=r.el.querySelectorAll(".stry-media-carousel-ticker"),s=0;if(a&&i){for(var n=0;n<a.length;n++){STRY.util.hasClass(a[n],"active")&&(s=n);try{a[n].querySelectorAll("video")[0].setAttribute("tabindex",-1),a[n].querySelectorAll("video")[0].pause()}catch{}STRY.util.removeClass(a[n],"active"),STRY.util.removeClass(i[n],"active")}2==a.length&&(e="forward"),"forward"==e?(s+=1)==a.length&&(s=0):"backward"==e&&(s-=1)<0&&(s=a.length-1),t&&(s=t),STRY.util.addClass(a[s],"active");try{a[s].querySelectorAll("video")[0].setAttribute("tabindex",0)}catch{}!function(e){if(e&&e.firstChild){var t,a=e.firstChild;STRY.util.hasClass(a,"stry-landscape")?t="stry-media-carousel-landscape":STRY.util.hasClass(a,"stry-portrait")&&(t="stry-media-carousel-portrait"),STRY.util.removeClass(r.el,"stry-media-carousel-landscape"),STRY.util.removeClass(r.el,"stry-media-carousel-portrait"),STRY.util.addClass(r.el,t)}}(a[s]),STRY.util.addClass(i[s],"active")}}function o(){return r.el.querySelectorAll(".stry-media-carousel-list-item")}return r.el.onclick=i,r.el.addEventListener("stryCarouselTickerClick",i),r.enableMediaCarousel(),r}function m(a,r){if(!(this instanceof m))return new m(a,r||{},"");if(a)if(a.params){if(r){var i,s,n=this,o='<div class="stry-loader-graphic"><div></div><div></div><div></div><div></div><div></div></div>',l="22px",c="20px",d=!1,u=!1,p=!1;n.remove=function(){n.el&&n.el.parentNode&&n.el.parentNode.removeChild(n.el)};var f=function(t){switch(!!(t=t||e.event).type&&t.type){case"onClicked":STRY.util.hasClass(t.detail.target,"stry-loader-button")&&_();break;case"stylesAreReady":d=!0,u&&y();break;case"controlsAreReady":u=!0,d&&y();break;case"documentIsReady":p=!0,g();break;case"documentHasUpdated":g()}},_=function(){clearTimeout(i),clearTimeout(s),clearTimeout(void 0),n.outer&&(n.outer.style.width=n.width,n.outer.style.height=n.height,n.el.style.height=n.height,STRY.util.addClass(n.el,"stry-loader-loading"),i=setTimeout((function(){STRY.util.addClass(n.el,"stry-loader-shrink"),n.outer.style.width=l,n.outer.style.height=c,n.outer.style.top=n.pos}),100),s=setTimeout((function(){STRY.util.addClass(n.el,"stry-loader-split"),STRY.util.addClass(n.el,"stry-loader-animate")}),300))},g=function(){clearTimeout(i),clearTimeout(s),clearTimeout(void 0),n.outer&&(STRY.util.removeClass(n.el,"stry-loader-animate"),STRY.util.removeClass(n.el,"stry-loader-split"),STRY.util.removeClass(n.el,"stry-loader-no-transition"),n.outer.style.width=n.width,n.outer.style.height=n.height,n.outer.style.top=0,s=setTimeout((function(){STRY.util.removeClass(n.el,"stry-loader-shrink"),STRY.util.removeClass(n.el,"stry-loader-loading")}),200))},y=function(){n.el=a.el.querySelector(r),n.outer=n.el.querySelector(".stry-loader-outer"),n.outer?n.outer.htmlContent(o):(n.el.htmlContent('<div class="stry-loader-outer">'+o+"</div>"),n.outer=n.el.querySelector(".stry-loader-outer")),STRY.util.hasClass(n.el,"is-button")?(n.isButton=!0,n.width=n.outer.offsetWidth+20+"px",n.height=n.outer.offsetHeight+"px",n.pos=(parseInt(n.height)-parseInt(c))/2+"px",n.el.hasAttribute("data-stry-loader-init")&&!p&&(STRY.util.addClass(n.el,"stry-loader-no-transition"),STRY.util.addClass(n.el,"stry-loader-loading"),STRY.util.addClass(n.el,"stry-loader-shrink"),STRY.util.addClass(n.el,"stry-loader-split"),n.el.style.height=n.height,n.outer.style.width=l,n.outer.style.height=c,n.outer.style.top=n.pos,STRY.util.addClass(n.el,"stry-loader-animate"))):(n.outer.style.width=l,n.outer.style.height=c,STRY.util.addClass(n.el,"stry-loader-no-transition"),STRY.util.addClass(n.el,"stry-loader-loading"),STRY.util.addClass(n.el,"stry-loader-shrink"),STRY.util.addClass(n.el,"stry-loader-split"),STRY.util.addClass(n.el,"stry-loader-animate"))},h=function(){n.inc||(n.inc=0),n.inc+=1,n.inc===n.total&&(f({type:"stylesAreReady"}),n.inc=0)};return function(){var e=t.querySelectorAll('link[data-stry-type="stylesheet"]'),i=e.length,s=a.el.querySelector(r);if(!s||STRY.util.hasClass(s,"is-button")){if(n.inc=0,n.total=e.length,i>0)for(;i--;)e[i].addEventListener("load",h)}else y();a.addEventListener("onClicked",f),a.addEventListener("controlsAreReady",f),a.addEventListener("documentIsReady",f),a.addEventListener("documentHasUpdated",f)}(),n}STRY.util.error("StoryStream -> SDK -> StoryLoader -> No element selector specified")}else STRY.util.error("StoryStream -> SDK -> StoryLoader -> No parameters supplied");else STRY.util.error("StoryStream -> SDK -> StoryLoader -> Scope must be defined.")}function f(a){if(!(this instanceof f))return new f(a||{});if(a.params.direct_upload.terms_url){if(a.params.direct_upload.endpoint){var r,i,s,n,o,l=new STRY.renderer(a),c=0,d=/^(([a-zA-Z]|[0-9])|([-]|[_]|[.]|[+]))+[@](([a-zA-Z0-9])|([-])){2,63}(([a-zA-Z0-9]|[.]){2,63})+/,u={app_id:a.params.sharing.app_id,author:{},files:[],terms_url:R(a.params.direct_upload.terms_url),privacy_policy_url:R(a.params.direct_upload.privacy_policy_url),additional_checkbox:R(a.params.direct_upload.additional_checkbox),website:{},errors:{},terms_disabled:a.params.direct_upload_terms_disabled};a.params.api.channel_id&&(u.channel_id=a.params.api.channel_id),a.params.api.story_id&&(u.story_id=a.params.api.story_id);var p=a.language?a.language:a.params.language,m=function(r){var s=!!(r=r||e.event).type&&r.type;if(r=r.detail?r.detail:r,"onClicked"===s)switch(r.data.action){case"directUploadOpen":b(c=1),i=a.el.querySelector("."+STRY.resources.class_direct_upload_popop),STRY.util.addClass(i,STRY.resources.class_direct_upload_popup_active),n=t.getElementsByTagName("body")[0],STRY.util.addClass(n,"stry-direct-upload-is-active"),o=t.getElementsByTagName("html")[0],STRY.util.addClass(o,"stry-direct-upload-is-active"),a.params.accessibility_features&&(null,setTimeout((function(){var e=a.el.querySelector(".stry-direct-upload-popup").querySelector('[role="dialog"]');aria&&new aria.Dialog(e,null,a.el.querySelector(".stry-direct-upload-icons-list div"))}),100));break;case"directUploadClose":STRY.util.hasClass(r.target,"stry-direct-upload-close-link")&&(S(),u={app_id:a.params.sharing.app_id,files:[],author:{},terms_url:a.params.direct_upload.terms_url,privacy_policy_url:a.params.direct_upload.privacy_policy_url,tab:null,living:null,website:{},errors:{},terms_disabled:a.params.direct_upload_terms_disabled},STRY.util.removeClass(i,STRY.resources.class_direct_upload_popup_active),STRY.util.removeClass(n,"stry-direct-upload-is-active"),STRY.util.removeClass(o,"stry-direct-upload-is-active"),a.params.accessibility_features&&a.el.querySelector("#direct-upload").focus());break;case"directUploadNext":_(r.data),S(),c++,b(c,u);break;case"directUploadBack":_(r.data),S(),c--,b(c,u);break;case"directUploadFinish":_(),T();break;case"directUploadStartUploadCare":_(r.data),S(),b("upload_care",u).then((function(){e.require&&e.define&&!a.appStoreMode?require(["https://ucarecdn.com/libs/widget/3.17.2/uploadcare.full.min.js"],(function(e){k(e)})):k(uploadcare)}));break;case"directUploadStopUploadCare":S(),b(c);break;case"directUploadRemoveFile":_(r.data),g(r),S(c),u.files.length<1&&c--,b(c,u);break;case"directUploadRestart":S(),u.author.terms_and_conditions=!1,u.author.privacy_policy=!1,u.author.additional_checkbox=!1,u.website={},u.files=[],u.errors={},b(c=1,u);break;case"directUploadStopBubbling":r.event.stopPropagation()}},_=function(e){1!==c?2!==c?3!==c||y(e):h(e):v(e)},g=function(e){var t=e.data.element.getAttribute("data-stry-file-id");u.files.splice(parseInt(t),1)},y=function(){for(var e=a.el.querySelector("#stry-direct-upload-form").querySelectorAll("input.stry-author-input"),t=0;t<e.length;t++)u.author[e[t].name]=e[t].value;a.el.querySelector("#terms_and_conditions:checked")||a.params.direct_upload_terms_disabled?u.author.terms_and_conditions=!0:u.author.terms_and_conditions=!1,a.el.querySelector("#privacy_policy:checked")&&a.params.direct_upload.privacy_policy_url||a.params.direct_upload_terms_disabled?u.author.privacy_policy=!0:u.author.privacy_policy=!1,a.el.querySelector("#additional_checkbox:checked")&&a.params.direct_upload.hasOwnProperty("additional_checkbox")?u.author.additional_checkbox=!0:u.author.additional_checkbox=!1},h=function(){for(var e=a.el.querySelectorAll(".stry-direct-upload-file-description"),t=0;t<e.length;t++)u.files[t].description=e[t].value},v=function(e){u.tab=e.element.children[0].children[0].value},S=function(e){var t=a.el.querySelector(".stry-direct-upload-body-inner");t.parentNode.removeChild(t)},b=function(e,r){return new Promise((function(i,s){r=r||{},l.compile({template:a.params.direct_upload["tab_template_"+e],item:{info:r,localisation:p.strings},callback:function(r){a.el.querySelector(".stry-direct-upload-body").appendChild(r.el),3===e&&setTimeout((function(){var e=t.createElement("input"),a=t.createElement("span"),r=t.createTextNode(p.strings.i_am_not_robot);e.type="checkbox",e.name="living",e.checked=!1,e.id="living",a.classList.add("stry-check-faux"),t.querySelector("#terms_check")&&t.querySelector("#terms_check").classList.add("stry-check-enhanced"),t.querySelector("#living_check").classList.add("stry-check-enhanced"),t.querySelector("#living_check").appendChild(e),t.querySelector("#living_check").appendChild(r),t.querySelector("#living_check").appendChild(a)}),1e3),i()}})}))},w=function(e){if(!1===e.isImage)throw new Error("File type not supported")},k=function(e){data=u,e.tabsCss.addStyle(".side-bar { display: none; } .main-content { margin-left: 0; } .main-content-header, .main-content-header-reserved, .uploadcare-dialog-button { display: none; } .welcome { padding-top: 5px; }"),data.tab||(data.tab="file"),(r=e.openPanel("#uploader-placeholder",null,{tabs:data.tab,publicKey:a.params.direct_upload.uploadcare_publickey,role:"uploadcare-uploader",multiple:!0,previewStep:!1,imagesOnly:!0,validators:[w]})).done((function(e){Promise.all(e.files()).catch((function(e){return s&&s.remove(),l.compile({template:a.params.direct_upload.error_template,item:{error:e,localisation:p.strings},callback:function(e){a.el.querySelector(".stry-direct-upload-main").appendChild(e.el)}}),{error:e}})).then((function(e){var t;if(!e.hasOwnProperty("error")){t=e,"instagram"===u.tab&&(u.author={id:t[0].sourceInfo.user_id,user_name:t[0].sourceInfo.username,display_name:t[0].sourceInfo.username});for(var a=u.files.length,r=0;r<t.length;r++)u.files.push({id:t[r].uuid,public_url:t[r].cdnUrl,source:t[r].sourceInfo.source,type:t[r].isImage?"image":""}),"instagram"===t[r].sourceInfo.source&&(u.files[a+r].description=t[r].sourceInfo.caption.replace(/"/g,"&quot;"),u.files[a+r].source_url=t[r].sourceInfo.public_page,u.files[a+r].likes={count:t[r].sourceInfo.like_count});S(),c++,b(c,{files:u.files})}}))})).onTabVisibility((function(e,t){"file"===u.tab&&(l.compile({template:a.params.direct_upload.loading_template,item:{localisation:p.strings},callback:function(e){a.el.querySelector(".stry-direct-upload-main").appendChild(e.el),s=new STRY.loader(a,"[data-stry-loader]")}}),r.resolve())})).fail((function(e){console.log("ERROR: ",e)}))},T=function(){u.author.id||(""===u.author.user_name?u.errors.user_name=p.strings.please_enter_name:(u.author.display_name=u.author.user_name,delete u.errors.user_name),""!==u.author.email&&u.author.email.match(d)?delete u.errors.email:u.errors.email=p.strings.please_enter_valid_email),u.author.terms_and_conditions||u.terms_disabled?delete u.errors.terms_and_conditions:u.errors.terms_and_conditions=p.strings.please_agree_to_terms_and_conditions,u.author.privacy_policy||u.terms_disabled||!a.params.direct_upload.privacy_policy_url?delete u.errors.privacy_policy:u.errors.privacy_policy=p.strings.please_confirm_privacy_policy,!u.author.additional_checkbox&&a.params.direct_upload.hasOwnProperty("additional_checkbox")&&""!=a.params.direct_upload.additional_checkbox?u.errors.additional_checkbox=!0:delete u.errors.additional_checkbox,u.website=a.el.querySelector("#stry-direct-upload-form").querySelector('input[name="website"]').value,u.living=a.el.querySelector("#stry-direct-upload-form").querySelector('input[name="living"]').checked,u.living?delete u.errors.living_check:u.errors.living_check=p.strings.please_prove_you_are_not_robot,0===Object.keys(u.errors).length?(STRY.util.request({url:a.params.direct_upload.endpoint,method:"POST",content_type:"application/json",data:JSON.stringify(u)}),S(),c++,b(c,u)):(S(),b(c,u))};return this.applyUploadCare=function(){var r=t.createElement("script");r.type="text/javascript",r.id="stst_uploadcare_script",r.src="https://ucarecdn.com/libs/widget/3.17.2/uploadcare.full.min.js",r.integrity="sha256-RIw1QGksH8N9pp5Ie4XJxpmK2I+HVuM9a8i8lvo1uyY=",r.crossOrigin="anonymous";var i=t.createElement("script");i.textContent="UPLOADCARE_LIVE = false;";var s=t.createElement("script"),n=p.code.split("-")[0];if(s.textContent='UPLOADCARE_PUBLIC_KEY = "'+a.params.direct_upload.uploadcare_publickey+'"; UPLOADCARE_LOCALE = "'+n+'";',"en"==n){var o=t.createElement("script"),l=JSON.stringify({dialog:{tabs:{file:{drag:"Drop a file here"}}}});o.textContent="UPLOADCARE_LOCALE_TRANSLATIONS = "+l,t.getElementsByTagName("body")[0].appendChild(o)}if(p.strings.direct_upload_drag_drop&&p.strings.direct_upload_choose_local_file){var c=t.createElement("script"),d={dialog:{tabs:{file:{drag:p.strings.direct_upload_drag_drop,button:p.strings.direct_upload_choose_local_file}}}},u=JSON.stringify(d);c.textContent="UPLOADCARE_LOCALE_TRANSLATIONS = "+u,t.getElementsByTagName("body")[0].appendChild(c)}t.getElementsByTagName("body")[0].appendChild(s),e.require||e.define||t.getElementsByTagName("body")[0].appendChild(r),t.getElementsByTagName("head")[0].appendChild(i)},a.addEventListener("onClicked",m),this}STRY.util.error("StoryStream -> SDK -> StoryDirectUpload -> No direct upload url parameter supplied")}else STRY.util.error("StoryStream -> SDK -> StoryDirectUpload -> No terms and conditions url parameter supplied");function R(t){return"string"!=typeof t&&t?t[e.location.host]?t[e.location.host]:"":t}}function _(t){if(!(this instanceof _))return new _(t||{});if(t){var r=this,i="8cc4ce9af656e65cb87e13a1eae3139a",s=!!t.params.cookie_domain&&t.params.cookie_domain;r.cookie_value=a,r.app_interaction_value=a;var n=function(t){var a,i,s;switch(!!(t=t||e.event).type&&t.type){case"onViewed":l(),"no_interaction"==r.app_interaction_value.interaction_type&&(r.app_interaction_value={interaction_type:"view",time_stamp:Math.round((new Date).getTime()/1e3)},o());break;case"onEngagedView":l(),(!r.app_interaction_value||"engaged-view"!==r.app_interaction_value.interaction_type&&"hover"!==r.app_interaction_value.interaction_type&&"click"!==r.app_interaction_value.interaction_type&&"smart-goal-click"!==r.app_interaction_value.interaction_type)&&(r.app_interaction_value={interaction_type:"engaged-view",time_stamp:Math.round((new Date).getTime()/1e3)},o());break;case"onHovered":l(),(!r.app_interaction_value||"hover"!==r.app_interaction_value.interaction_type&&"click"!==r.app_interaction_value.interaction_type&&"smart-goal-click"!==r.app_interaction_value.interaction_type)&&(r.app_interaction_value={interaction_type:"hover",time_stamp:Math.round((new Date).getTime()/1e3)},o());break;case"onClicked":if(void 0!==(s=STRY.util.getDataAttribute(t.detail.target,STRY.resources.data_track))&&null!==s.action&&(a=s.action.split(/,(.+)/)[0],i=s.action.replace(/([^\,]*\,){2}/,"").replace(" ","")),"Read more"!==a&&"Content Item"!==a)break;l(),(!r.app_interaction_value||"smart-goal-click"!==r.app_interaction_value.interaction_type||"SmartGoal"!==a&&"smart-goal-click"!==r.app_interaction_value.interaction_type)&&(r.app_interaction_value={interaction_type:"click",time_stamp:Math.round((new Date).getTime()/1e3),item_id:i},o());break;case"onSmartGoalClick":void 0!==(s=STRY.util.getDataAttribute(t.detail.target,STRY.resources.data_track,1))&&null!==s.action&&(a=s.action.split(/,(.+)/)[0],i=s.action.replace(/([^\,]*\,){2}/,"").replace(" ","")),l(),r.app_interaction_value={interaction_type:"smart-goal-click",time_stamp:Math.round((new Date).getTime()/1e3),click_type:a,item_id:i},o()}},o=function(){t.params.api.story_id&&(r.cookie_value||(r.cookie_value={}),void 0===r.cookie_value[t.params.api.story_id]&&(r.cookie_value[t.params.api.story_id]={}),r.cookie_value[t.params.api.story_id][t.params.sharing.app_id]=r.app_interaction_value,STRY.cookie.set(i,JSON.stringify(r.cookie_value),30,s))},l=function(){var e=STRY.cookie.get(i);e&&("object"!=typeof(e=JSON.parse(e))||e instanceof Array||(r.cookie_value=e,e[t.params.api.story_id]&&e[t.params.api.story_id][t.params.sharing.app_id]&&(r.app_interaction_value=e[t.params.api.story_id][t.params.sharing.app_id])))};return l(),r.app_interaction_value||(r.app_interaction_value={interaction_type:"no_interaction",time_stamp:Math.round((new Date).getTime()/1e3)}),o(),t.addEventListener("onClicked",n),t.addEventListener("onHovered",n),t.addEventListener("onSmartGoalClick",n),t.addEventListener("onViewed",n),t.addEventListener("onEngagedView",n),r}STRY.util.error("StoryStream -> SDK -> StoryReturnOnInvestment -> Scope for displaying must be defined.")}function g(a){if(!(this instanceof g))return new g(a||{});if(a){var r=this,i=!1;r.apply=function(e){var a="IMG"===e.nodeName?e:e.querySelectorAll("img")[0];if(a&&!STRY.util.isIE()){var r=t.createElement("div"),s=a.src;STRY.util.addClass(e,"stry-kenfits"),STRY.util.addClass(a,"stry-kenfits-image"),r.className="stry-kenfits-blur",r.style.backgroundImage="url('"+s+"')";var o=e.querySelector(".stry-spot-wrapper");o?(o.style.height="100%",o.insertBefore(r,a)):e.insertBefore(r,a),n(a,(function(t){if(STRY.util.addClass(e,t),i){var r=a.clientWidth,s=a.clientHeight;0===s?(s="100%",r="auto"):0===r?(s="auto",r="100%"):(s+="px",r+="px"),a.setAttribute("style","height: "+s+" !important; width: "+r+" !important;"),a.setAttribute("data-stry-height",s),a.setAttribute("data-stry-width",r)}}))}},r.applyToAll=function(e){for(var t,a=e.length;a--;)!!(t=e[a]).querySelector(".stry-kenfits-blur")||r.apply(t)};var s=function(t){var a=!!(t=t||e.event).type&&t.type,r=t.target||{};switch(a){case"mouseover":case"mouseout":var i,s=STRY.util.getClosest(r,(function(e){return STRY.util.hasClass(e,"stry-item-hover")}));s&&(i=s.querySelector(".stry-kenfits-image"))&&o(i,a)}},n=function(e,t){var a,r;a=setInterval((function(){e.naturalWidth>0&&(t&&(r=e.naturalHeight>e.naturalWidth?"stry-portrait":"stry-landscape",t(r)),clearInterval(a))}),1)},o=function(e,t){var a,r,i,s=e.parentNode,n=s.clientHeight;switch(t){case"mouseover":STRY.util.hasClass(s,"stry-portrait")?(i=e.naturalWidth/e.naturalHeight,a=n,r=Math.round(a*i)):(i=e.naturalHeight/e.naturalWidth,r=n,a=Math.round(r*i)),e.setAttribute("style","height: "+a+"px !important; width: "+r+"px !important;");break;case"mouseout":e.removeAttribute("style"),r=e.getAttribute("data-stry-width"),a=e.getAttribute("data-stry-height"),e.setAttribute("style","height: "+a+" !important; width: "+r+" !important;")}};return STRY.util.addClass(a.el,"stry-has-kenfits"),a.params.presets&&a.params.presets.kenfitsHover&&(STRY.util.addClass(a.el,"stry-has-kenfits-with-hover"),i=!0,a.el.addEventListener("mouseover",s),a.el.addEventListener("mouseout",s)),r}STRY.util.error("StoryStream -> SDK -> StoryKenFits -> Scope must be defined.")}function y(a){var r,i,s;this.willUpdatePopupMetaData=function(a){var n=t.querySelector("title"),o=t.querySelector('link[rel="canonical"]'),l=t.querySelector('meta[name="description"]');n&&(r=n.textContent,a.title&&(n.textContent=r+" - "+a.title)),o&&(i=o.href,o.href=e.location.href),l&&l.hasAttribute("content")&&a.seo_description&&(s=l.getAttribute("content"),l.setAttribute("content",a.seo_description))},this.willResetPopupMetaData=function(){var e=t.querySelector("title"),a=t.querySelector('link[rel="canonical"]'),n=t.querySelector('meta[name="description"]');e&&(e.textContent=r),a&&(a.href=i),n&&n.hasAttribute("content")&&n.setAttribute("content",s)}}function h(a,r,i){if(!(this instanceof h))return new h(a,r,i||{});var s=this;s.popup=r,s.data=i,s.supportsNativeSmoothScroll="scrollBehavior"in t.documentElement.style,s.imageEl=s.popup.querySelector(".stry-main-image"),e.innerWidth<900?s.wrapper=s.popup.querySelector(".stry-visual-smartgoal-wrapper.mobile")?s.popup.querySelector(".stry-visual-smartgoal-wrapper.mobile"):s.popup.querySelector(".stry-visual-smartgoal-wrapper"):s.wrapper=s.popup.querySelector(".stry-visual-smartgoal-wrapper.desktop")?s.popup.querySelector(".stry-visual-smartgoal-wrapper.desktop"):s.popup.querySelector(".stry-visual-smartgoal-wrapper"),s.inner=s.wrapper.querySelector(".stry-visual-smartgoal-list"),s.leftButton=s.wrapper.querySelector(".stry-visual-smartgoal-list-button.left"),s.rightButton=s.wrapper.querySelector(".stry-visual-smartgoal-list-button.right"),s.items=s.wrapper.querySelectorAll(".stry-visual-smartgoal"),s.spots=[];var n=0,o=0,l=0,c=function(t,a,r,i){for(var s=r/100,n=0,o=0;n<=a;)e.setTimeout(d,n,t,o,s,i),n+=a/100,o++};function d(e,t,a,r){e.scrollLeft=a*t+r}var u,p=function(){s.inner.clientWidth<s.inner.scrollWidth&&s.wrapper.classList.add("has-right-button"),s.inner.addEventListener("scroll",(function(e){s.inner.scrollLeft>=s.inner.scrollWidth-s.inner.offsetWidth-24?(s.wrapper.classList.remove("has-right-button"),s.rightButton.tabIndex=-1):0==s.inner.scrollLeft?(s.wrapper.classList.remove("has-left-button"),s.leftButton.tabIndex=-1):(s.wrapper.classList.add("has-left-button"),s.wrapper.classList.add("has-right-button"),s.rightButton.tabIndex=0,s.leftButton.tabIndex=0)})),s.leftButton.onclick=m,s.rightButton.onclick=f},m=function(){l-1>0?(l--,s.supportsNativeSmoothScroll?s.inner.scrollTo({left:s.items[l].offsetLeft-24,behavior:"smooth"}):c(s.inner,250,s.items[l].offsetLeft-24-s.inner.scrollLeft,s.inner.scrollLeft)):l-1==0&&(l=0,s.supportsNativeSmoothScroll?s.inner.scrollTo({left:0,behavior:"smooth"}):c(s.inner,250,-s.inner.scrollLeft,s.inner.scrollLeft))},f=function(){if(l+1<s.items.length){var e=0;++l>1&&(e=24),s.supportsNativeSmoothScroll?s.inner.scrollTo({left:s.items[l].offsetLeft-e,behavior:"smooth"}):c(s.inner,250,s.items[l].offsetLeft-(s.inner.scrollLeft+e),s.inner.scrollLeft)}},_=function(e){e.sizes&&e.sizes.original&&e.sizes.original.width&&e.sizes.original.height&&(n=e.sizes.original.width,o=e.sizes.original.height,STRY.util.addLoadEvent(s.imageEl,(function(){g(s.data.visual_smartgoals),y(),a.addEventListener("onResized",y)})))},g=function(e){for(var a=e.length,r=0;r<a;r++)if(e[r].has_coords&&e[r].coords&&e[r].coords.x&&e[r].coords.y){var i=t.createElement("div");i.classList.add("stry-spot"),i.textContent=e[r].index,s.spots.push({el:i,originalCoords:e[r].coords,applied:!1})}},y=function(){for(var t=s.spots.length,a=0;a<t;a++){var r=s.imageEl.parentNode.clientWidth-s.imageEl.clientWidth,i=s.imageEl.parentNode.clientHeight-s.imageEl.clientHeight,l=(s.spots[a].originalCoords.x+r/2)/(n+r)*100,c=(s.spots[a].originalCoords.y+i/2)/(o+i)*100;if("contain"==e.getComputedStyle(s.imageEl).getPropertyValue("object-fit")){var d=s.imageEl.naturalWidth/s.imageEl.naturalHeight,u=s.imageEl.height*d,p=s.imageEl.height;u>s.imageEl.width&&(u=s.imageEl.width,p=s.imageEl.width/d);var m=(s.imageEl.parentNode.clientHeight-p)/2,f=(s.imageEl.parentNode.clientWidth-u)/2,_=p/o,g=u/n,y=m+s.spots[a].originalCoords.y*_,h=f+s.spots[a].originalCoords.x*g;c=y/s.imageEl.parentNode.clientHeight*100,l=h/s.imageEl.parentNode.clientWidth*100}s.spots[a].el.style.left="calc("+l+"% + "+-12+"px)",s.spots[a].el.style.top="calc("+c+"% + "+-12+"px)",s.spots[a].applied||(s.imageEl.parentNode.insertBefore(s.spots[a].el,s.imageEl),s.spots[a].applied=!0)}};return 0==s.data.videos.length&&s.data.images&&1==s.data.images.length&&_(s.data.images[0]),e.innerWidth<480&&(s.popup.querySelector(".stry-visual-smartgoal-outer").style.maxHeight="0px"),((u=s.inner).scrollWidth>u.clientWidth||u.scrollHeight>u.clientHeight)&&p(),s}function v(){var a=this;a.fb_added=!1,a.initialised=!1,a.init=function(e){if(!t.getElementById("fb-root")&&!e){var r=t.body,i=t.createElement("div");i.id="fb-root",r.insertBefore(i,r.firstChild)}a.initialised=!0},a.applyXFBMLreparse=function(t){STRY.util.isIE()&&STRY.util.isIE()<9||e.setTimeout((function(){"undefined"!=typeof FB&&e.fbAsyncInit.hasRun&&FB.XFBML.parse(t)}),0)},a.addFacebookSDK=function(){var e="facebook-jssdk";if(!t.getElementById(e)){var r=null,i=t.getElementsByTagName("script")[0];(r=t.createElement("script")).setAttribute("async","true"),r.setAttribute("defer","true"),r.id=e,r.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(r,i)}a.fb_added=!0},a.initFacebookSDK=function(){e.fbAsyncInit||(e.fbAsyncInit=function(){FB.init({xfbml:!0,version:"v4.0"})})}}function S(){var e=this;e.twitter_added=!1,e.init=function(){!function(){try{twttr.impressions}catch(e){var a,r=t.getElementsByTagName("script")[0],i=/^http:/.test(t.location)?"http":"https";t.getElementById("twitter-imp")||((a=t.createElement("script")).id="twitter-imp",a.setAttribute("async","async"),a.src=i+"://platform.twitter.com/impressions.js",r.parentNode.insertBefore(a,r))}e.twitter_added=!0}()},e.log=function(t){var r=function(e){var t=[];if("object"==typeof e){if("[object Array]"===Object.prototype.toString.call(e)&&e.length>0){var r=e.length;if(e[0].nodeName===a)for(;r--;)"twitter"===e[r].feed_type.toLowerCase()&&t.push(e[r].source_content_item_id)}}return t}(t);if(r.length>0)try{twttr.impressions&&twttr.impressions.logTweets(r,{partner:"storystream"})}catch(a){e.init(),setTimeout((function(){e.log(t)}),100)}},e.follows=function(t){try{twttr.widgets&&twttr.widgets.load(t)}catch(a){e.init(),setTimeout((function(){e.follows(t)}),100)}}}function b(t){if(!(this instanceof b))return new b(t||{});if(t)if(t.params)if(t.params.api){this.items=[],this.filters=[],this.pages=0,this.page=0;var r=this,i=t.params,s=(i.no_cookies||i.no_base_cookies,"//d29qb9vav0xwuc.cloudfront.net");i.cookie_killswitch&&!0;var n,o=[],l=[],c={term:null,category:null,query:null},d=!1,u={item:null,published:null,fallback:null},p={limit:null,channel_id:null};this.loadMore=function(){"custom"===i.api.type?y({more:!1}):g({more:!0})},this.loadFallbackContent=function(e,a){p.channel_id=t.params.api.channel_id,p.limit=t.params.limit,t.params.api.channel_id=t.params.fallback_channel_id,t.params.limit=a,t.params.fallback_language_code&&(t.params.filters.tags?t.params.filters.tags.push({url_name:e}):t.params.filters.tags=[{url_name:e}]),t.params.filters.products=[],g({more:!1,fallback_request:!0})};this.resetAndReload=function(){this.items=[],this.pages=0,this.page=0,"custom"===i.api.type?y({more:!1}):g({more:!1})},this.loadNew=function(){STRY.util.transmit(t,"onLoadingItems",{target:t.el,data:a}),h()},this.getFilters=function(){return this.filters},this.poll=function(){var e=S();STRY.util.transmit(t,"onPollingItems",{target:t.el,data:a}),STRY.util.request({url:e,cache:!1,method:"GET",success:function(e){C(r,e),_(r)},error:function(e){C(r,e)}})},this.getItemById=function(e){return e?f(e):a},this.loadItemById=function(e,t){if(!e)return a;v(e,t)};var m=function(t){switch(!!(t=t||e.event).type&&t.type){case"onForceRedraw":r.resetAndReload();break;case"searchApply":!function(e,t,a){this.items=[],this.pages=0,this.page=0,c.term=e,c.category=t,c.query=a,d=!0,g({more:!0})}(t.detail.term,t.detail.category,t.detail.param);break;case"searchClear":!function(){this.items=[],this.pages=0,this.page=0,c.term=null,c.category=null,c.query=null,d=!0,g({more:!0})}()}},f=function(e){var t,i,s=r.items.length;for(e=e?e.toString():a;s--;)(t=r.items[s].content_block_id)&&e===t.toString()&&(i=r.items[s]);return i},_=function(e){var t=i.polling;t&&t>=5e3?(clearTimeout(n),n=setTimeout((function(){u.item||u.published?_(e):e.poll()}),t)):t&&t<5e3&&STRY.util.error("StoryStream -> SDK -> StoryStream -> Polling interval cannot be set to a value of less than 5000 (5 seconds)")},g=function(e){var s=S(e),n=i.api.type;e.fallback_request?u.fallback=s:u.published=s,STRY.util.transmit(t,"onLoadingItems",{target:t.el,data:a}),STRY.util.request({url:s,cache:!1,method:"GET",success:function(a,i){STRY.util.transmit(t,"refreshLogOutTimer",{}),R(r,a,i),"published"!==n&&"app.hashtag_battle"!==n&&"app.storystream_tv"!==n||e.more||_(r)},error:function(e,t){R(r,e,t)}})},y=function(e){var s,n=function(e,t){for(var a=i.api.environment+i.api.endpoints[e].url,r=Object.keys(i.api.endpoints[e].parameters),s=r.length;s--;)a+="&"+r[s]+"="+i.api.endpoints[e].parameters[r[s]];return a}(s=e.more&&i.api.endpoints.more?"more_items":e.item?"single_item":"all_items");u.published=n,STRY.util.transmit(t,"onLoadingItems",{target:t.el,data:a}),STRY.util.request({url:n,cache:!1,csrf_token:i.api.endpoints[s].csrf_token,method:i.api.endpoints[s].method||"GET",data:JSON.stringify(i.api.endpoints[s].data),content_type:"application/json",success:function(e,t){R(r,e,t)},error:function(e,t){R(r,e,t)}})},h=function(){var e=!1;if(o.length>0){for(var a=o.length;a--;)r.items.unshift(o[a]);e=!0}l!=r.filters&&(r.filters=l,e=!0),e&&STRY.util.transmit(t,"onLoadingComplete",{target:t.el,data:o,filters:l,newItems:!0}),k()},v=function(e,i){var s;r.items.length;if(e=e?e.toString():a,STRY.util.transmit(t,"onItemLoading",{target:t.el,data:a}),s=f(e))Y(r,s,i);else{var n=S({item:e});u.item=n,STRY.util.request({url:n,cache:!1,method:"GET",success:function(e,t){Y(r,e,i,t)},error:function(e,t){Y(r,e,i,t)}})}},S=function(a){var n,o,l,u;if(void 0!==t.params.hasDeeplinkCategories&&t.params.hasDeeplinkCategories&&(u=void 0!==t.params.customCategoryUrl&&t.params.customCategoryUrl?t.params.customCategoryUrl:"stst_cat:",l=[],o=(n=STRY.util.getUrlPrefix()).indexOf(u)>-1))for(var p=n.split(u)[1].split("/")[0].split(","),m=0;m<p.length;m++)STRY.util.containsObjectValue("url_name",p[m].toLowerCase(),l)||l.push({url_name:p[m].toLowerCase()});var f,_,g,y=i.api.type,h=function(){return-1!==["published","channel","channel_files"].indexOf(y)?a&&a.more?STRY.endpoints[y].all:a&&a.item?(g=a.item,STRY.endpoints[y].item):0===r.items.length?STRY.endpoints[y].all:a.fallback_request?STRY.endpoints[y].all:(_=r.items[0].content_block_id,STRY.endpoints[y].since):"livescreen"===y||"app.hashtag_battle"===y||"app.storystream_tv"===y?STRY.endpoints[y]:void STRY.util.error("StoryStream -> SDK -> StoryStream -> Invalid API configuation")};if(-1===["app.hashtag_battle","app.storystream_tv","channel","channel_files"].indexOf(y)?f=STRY.formatter.string(i.api.environment+h(),{story_name:i.api.story,access_token:i.api.token}):-1!==["channel","channel_files"].indexOf(y)?("//live.storystream.it"===i.api.environment&&(i.api.environment=s),f=STRY.formatter.string(i.api.environment+h(),{story_name:i.api.story,channel_id:i.api.channel_id,workflow_state:i.api.workflow_state?i.api.workflow_state:"live",access_token:i.api.token})):("//live.storystream.it"===i.api.environment&&(i.api.environment=s),f=STRY.formatter.string(i.api.environment+h(),{story_name:i.api.story,access_token:i.api.token,app_id:i.api.app_id})),g)f=STRY.formatter.string(f,{item_id:g});else{if(_&&(f=STRY.formatter.string(f,{since_id:_})),a&&a.more&&r.page&&r.page<=r.pages&&(d&&(r.page=0),f+="&page="+r.page),!_&&i.limit&&i.limit>0&&(f+="&rpp="+i.limit),i.filters){void 0!==t.params.hasDeeplinkCategories&&t.params.hasDeeplinkCategories&&o&&""!==l[0].url_name&&(t.filterScope.categories=l),t.params.custom_category_order&&"stry-emm-all"!==t.params.custom_category_order[0]&&!t.filterScope.categories&&(t.filterScope.categories=[{url_name:t.params.custom_category_order[0]}]);var v=t.filterScope.categories&&t.filterScope.categories.length?t.filterScope.categories:i.filters.categories,S=t.filterScope.tags&&t.filterScope.tags.length?t.filterScope.tags:i.filters.tags,b=t.filterScope.types&&t.filterScope.types.length?t.filterScope.types:i.filters.types,w=t.filterScope.media_types&&t.filterScope.media_types.length?t.filterScope.media_types:i.filters.media_types,k=i.filters.products&&i.filters.products.length?i.filters.products:[],T=i.filters.productGroup?i.filters.productGroup:null;if(i.hasQueryTags){var R=Object.fromEntries(new URLSearchParams(e.location.search).entries());if(R.stst_tags){var C=R.stst_tags.split(",");S||(S=[]),C.forEach(e=>{S.push({url_name:e})})}}if(v){f+="&categories=";for(var Y=0;Y<v.length;Y++)Y>0&&(f+=","),f+=v[Y].url_name}if(S||k){if(f+="&tags=",S)for(var x=0;x<S.length;x++)x>0&&(f+=","),f+=S[x].url_name;if(k){"homebase"==t.params.api.story&&(f+="&pdp_id="),S&&S.length&&k.length&&(f+=",");for(var A=0;A<k.length;A++)A>0&&(f+=","),f+=k[A]}}if(b){f+=!t.params.api.type||"channel"!=t.params.api.type&&"channel_files"!=t.params.api.type?"&types=":"&feedTypes=";for(var L=0;L<b.length;L++)L>0&&(f+=","),f+=!t.params.api.type||"channel"!=t.params.api.type&&"channel_files"!=t.params.api.type?b[L].url_name:b[L].url_name.toLowerCase()}if(w){f+="&media_types=";for(var E=0;E<w.length;E++)E>0&&(f+=","),f+=w[E].name}T&&(f+="&product_group="+T)}_||(f+="&all_media=true")}if(t.params.market_specific)if("1366"==t.params.api.story_id){var O=function(e){if(""==e)return{};for(var t={},a=0;a<e.length;++a){var r=e[a].split("=",2);1==r.length?t[r[0]]="":t[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return t}(e.location.search.substr(1).split("&")),I=encodeURIComponent(location.origin.replace("http://","//").replace("https://","//")+location.pathname);O.hasOwnProperty("glCountry")&&(I+=encodeURIComponent("?glCountry="+O.glCountry)),O.hasOwnProperty("glCurrency")&&(I+=encodeURIComponent("?glCurrency="+O.glCurrency)),f+="&market="+I}else if("2328"==t.params.api.story_id){var q=location.host,D="en-gb";try{D=location.pathname.split("/")[1]}catch(e){}f+="&market="+q+"/"+D}else f+="&market="+location.host;if("digital-magazine"==t.params.type&&(f+="&feedTypes=custom,review"),"news-hub"==t.params.type&&(f+="&feedTypes=custom"),i.query&&(f+=i.query),-1==f.indexOf(s)&&-1==f.indexOf("//d26ms2o5zr3dwc.cloudfront.net")||(f=f.replace("/api/","/")),c.term&&c.query&&c.category)switch(c.query){case"q":case"tags":case"text":case"category":case"aura":case"metadata":case"smart_goal":case"brand":f+="&"+c.query+"="+c.term;break;case"media_types":case"feedTypes":"Custom Article"==c.category?c.category="article":"Text Items"==c.category&&(c.category="text"),f+="&"+c.query+"="+c.category,f+="&q="+c.term}return f},w=function(e){if(i.filters||-1!==["channel","channel_files"].indexOf(i.api.type)){for(var a=-1!==["channel","channel_files"].indexOf(i.api.type)?STRY.resources.ce_filter_types:STRY.resources.filter_types,s=0;s<a.length;s++){var n=a[s];i.filters&&i.filters[n]?r.filters[n]=i.filters[n]:r.filters[n]=e[n]}t.params.emm&&r.filters.categories.unshift({name:"all",url_name:"stry-emm-all",data:{}})}return r.filters},k=function(){r.page>r.pages?STRY.util.transmit(t,"onNoMoreItems",null):r.page<=r.pages&&STRY.util.transmit(t,"onMoreItemsAvailable",null)},T=function(e){e&&e.blocks&&(r.pages=e.total_pages,!r.page&&r.pages<1?(r.page=0,r.pages=0):r.page&&1!==r.pages?r.page<=r.pages&&(r.page+=1):r.page=2)},R=function(e,a,r){var s="string"==typeof a?JSON.parse(a):a,n=[],o="string"==typeof u.published&&r&&r.url&&u.published===r.url.replace("http://","//").replace("https://","//"),l="string"==typeof u.fallback&&r&&r.url&&u.fallback===r.url.replace("http://","//").replace("https://","//");if(o||l){if(!s.status&&0!==s.status){var c,m=JSON.parse(a),f=i.api.type,_=[],g=0;if(i.sharing&&(m.share_url=i.sharing.url_query),-1!==["published","channel","channel_files"].indexOf(f))if(T(m),_=STRY.formatter.blocks(m,t,0==e.items.length),0===e.items.length)e.items=_;else for(c=_.length;c--;)e.items.push(_[g]),g++;else if("livescreen"===f)_=m.items,e.items=_;else if("app.hashtag_battle"===f)_=m,e.items=_;else if("app.storystream_tv"===f)_=m,e.items=_;else if("custom"===f&&i.api.data_formatter_method)if(_=i.api.data_formatter_method(m.items,!1,!1,t),0===e.items.length)e.items=_;else for(c=_.length;c--;)e.items.push(_[g]),g++;n=w(m.meta),s=_}var y={target:t.el,data:s,filters:n};y.refresh=!!d,o&&STRY.util.transmit(t,"onLoadingComplete",y),l&&STRY.util.transmit(t,"onFallbackLoadingComplete",y),d&&(d=!1),k(),o&&(u.published=!1),l&&(u.fallback=!1,t.params.api.channel_id=p.channel_id,t.params.limit=p.limit)}},C=function(e,r){var s,n=[],c=JSON.parse(r),d=i.api.type?i.api.type:a;"published"===d?(s=STRY.formatter.blocks(c,t),o=s,n=w(c.meta),l=n):"app.storystream_tv"!==d&&"app.hashtag_battle"!==d||(s=JSON.parse(r)),STRY.util.transmit(t,"onPollingComplete",{target:t.el,data:s,filters:n})},Y=function(e,a,r,s){var n="string"==typeof a?JSON.parse(a):a;!("string"==typeof u.item&&s&&s.url&&u.item===s.url.replace("http://","//").replace("https://","//"))&&s||(n.status||n.sdk||(n.share_url=i.sharing.url_query,STRY.formatter.blocks(n,t)),(!n.slug_name&&r||!r&&n.slug_name)&&(n={status:404}),r&&n.slug_name!==r&&(n={status:404}),STRY.util.transmit(t,"onItemLoadingComplete",{target:t.el,data:n}),u.item=!1)};STRY.util.connection((function(e){e.online&&("custom"==i.api.type?y({more:!1}):g({more:!1}))})),t.addEventListener("onForceRedraw",m),t.addEventListener("searchApply",m),t.addEventListener("searchClear",m)}else STRY.util.error("StoryStream -> SDK -> StoryStream -> No API details supplied");else STRY.util.error("StoryStream -> SDK -> StoryStream -> No parameters supplied");else STRY.util.error("StoryStream -> SDK -> StoryStream -> Scope must be defined.")}function w(e){if(doT)if(e){var a={},r="//s3-eu-west-1.amazonaws.com/templates.storystream.it/";this.compile=function(e){var r=STRY.util.slugify(e.template),s=t.createElement("div");a[r]?(s.htmlContent(a[r](e.item)),e.callback({el:s.children.length>1?s.children:s.children[0],html:a[r](e.item),params:e})):i(e.template,(function(t){t.length?(s.htmlContent(a[r](e.item)),e.callback({el:s.children.length>1?s.children:s.children[0],html:a[r](e.item),params:e})):e.callback({error:t,params:e})}))},this.prefetchTemplate=function(e,t){var r=STRY.util.slugify(e.template);a[r]||i(e.template,t||function(){})};var i=function(e,t){var i=STRY.util.slugify(e);".html"==e.slice(-5)?(e.indexOf(r)>-1&&(e=e.replace(r,"//d7c4jjeuqag9w.cloudfront.net/")),STRY.util.request({url:e,method:"GET",success:function(r){try{a[i]=doT.template(r),t(r)}catch(a){t({code:a}),console.warn(a),console.warn('StoryStream -> SDK -> Renderer -> Invalid template: "'+e+'"')}},error:function(a){t({code:404}),console.warn('StoryStream -> SDK -> Renderer -> Server error: "'+e+'"')}})):(a[i]=doT.template(e),t(e))}}else STRY.util.error("StoryStream -> SDK -> StoryRenderer -> Scope must be defined.");else STRY.util.error("StoryStream -> SDK -> StoryRenderer -> doT template engine not found.")}function k(t){var a=function(a){var i=!!(a=a||e.event).type&&a.type;switch(a=a.detail?a.detail:a,i){case"onClicked":if(t.params.custom_category_order&&-1==t.params.custom_category_order.indexOf("stry-emm-all")&&a.data.element.classList.contains("selected"))return;"filterClick"===a.data.action?r(a.data):"filterClearClick"===a.data.action&&r()}},r=function(e){var a,r;if(e&&e.element){t.params.can_multiselect_categories||t.resetFilters();var n=e.element,o=n.getAttribute(STRY.resources.data_filter_name),l=n.getAttribute(STRY.resources.data_filter_url),c=STRY.util.hasClass(n,"selected"),d=o.split("-");a=d[0];var u=d[1];if(void 0!==t.filterScope[a]&&""!==t.filterScope[a]||(t.filterScope[a]=[]),c||STRY.util.containsObjectValue("url_name",l,t.filterScope[a]))for(var p=0;p<t.filterScope[a].length;p++)t.filterScope[a][p].url_name==l&&t.filterScope[a].splice(p,1);else{if(t.filterScope[a].push({name:u,url_name:l}),!t.params.can_multiselect_categories){var m=t.el.querySelector(".stry-categories .stry-menu-link.selected");m&&m.classList.remove("selected")}n.classList.add("selected")}"stry-emm-all"==l&&(t.filterScope.categories=[]),"categories"===a&&void 0!==t.params.hasDeeplinkCategories&&t.params.hasDeeplinkCategories&&(r=i(),s(r))}else{for(var f=0,_=0;_<STRY.resources.filter_types.length;_++)a=STRY.resources.filter_types[_],f+=t.filterScope[a].length;if(0===f)return;t.resetFilters()}t.params.emm&&"storyboard"!==t.params.app_type?(t.filterScope.categories.length?t.el.classList.add("has-selected-emm-category"):t.el.classList.remove("has-selected-emm-category"),t.el.classList.remove("stry-emm-loaded"),t.el.querySelectorAll(".stry-item").forEach((function(e){e.classList.add("stry-item-loading")})),t.el.style.minHeight=t.el.offsetHeight+"px",setTimeout((function(){t.resetDOM(),t.resetAndReload()}),600)):(t.resetDOM(),t.resetAndReload())},i=function(){for(var e=[],a=0;a<t.filterScope.categories.length;a++)e.push(t.filterScope.categories[a].url_name);return e.join()},s=function(a){var r,i,s;r=void 0!==t.params.customCategoryUrl&&t.params.customCategoryUrl?t.params.customCategoryUrl:"stst_cat:",e.location.href.indexOf(r)>-1?(s=[(i=e.location.href.split(r))[0]+r+a,i[1].split("/")[1]].join("/"),e.location.href=s):(s=STRY.util.getUrlPrefix(r)+r+a,e.location.href=s)};!function(){if(t.addEventListener("onClicked",a),t.params&&t.params.prefilteredCategories&&t.params.prefilteredCategories.length){t.filterScope.categories=[];for(var e=0;e<t.params.prefilteredCategories.length;e++)t.filterScope.categories.push({url_name:t.params.prefilteredCategories[e]})}}()}function T(){var r=/\s+/,i=/[\n\t\r]/g,s={};HTMLElement.prototype.htmlContent=function(e){for(var t=(new DOMParser).parseFromString(e,"text/html").body;t.hasChildNodes();)this.appendChild(t.firstChild)},this.debounce=function(e,t,a,r){var i;return function(){var s=this,n=arguments,o=function(){i=null,STRY.util.isIE()&&STRY.util.isIE()<9&&(n=r||[{}]),a||e.apply(s,n)},l=a&&!i;clearTimeout(i),i=setTimeout(o,t),l&&e.apply(s,n)}},this.transmit=function(e,t,a){var r=new CustomEvent(t,{detail:a});e.dispatchEvent(r)},this.request=function(e){if(e.url in s&&e.success)e.success(s[e.url]);else{void 0!==e.cache&&"boolean"==typeof e.cache||(e.cache=!0);var t=new XMLHttpRequest;if(t.open(e.method||"GET",e.url,!0),e.data&&t.setRequestHeader&&t.setRequestHeader("Content-type",e.content_type||"application/x-www-form-urlencoded"),e.csrf_token&&t.setRequestHeader&&t.setRequestHeader("X-CSRFToken",e.csrf_token),t.url=e.url,t.onreadystatechange!==a){if(t.onreadystatechange=function(){4==t.readyState&&(200!=t.status&&304!=t.status?e.error&&e.error(t):(e.cache&&(s[e.url]=t.responseText),e.success&&e.success(t.responseText,t)))},4==t.readyState)return;t.send(e.data)}else null===t.onload&&(t.onload=function(){e.cache&&(s[e.url]=t.responseText),e.success&&e.success(t.responseText,t)},t.onprogress=function(){},t.ontimeout=function(){},t.onerror=function(){},setTimeout((function(){t.send(e.data)}),0))}},this.connection=function(e){e&&e({online:!0})},this.formatString=function(e,t){return STRY.formatter.string(e,t)},this.shuffle=function(e){for(var t,a,r=e.length;0!==r;)a=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[a],e[a]=t;return e},this.searchObjectArray=function(e,t,a){return e.filter((function(e){try{return e[t].toLowerCase().indexOf(a.toLowerCase())>-1}catch(e){return!1}}))},this.utf8_encode=function(e){if(null==e)return"";var t,a,r,i=e+"",s="";t=a=0,r=i.length;for(var n=0;n<r;n++){var o=i.charCodeAt(n),l=null;if(o<128)a++;else if(o>127&&o<2048)l=String.fromCharCode(o>>6|192,63&o|128);else if(55296!=(63488&o))l=String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128);else{if(55296!=(64512&o))throw new RangeError("Unmatched trail surrogate at "+n);var c=i.charCodeAt(++n);if(56320!=(64512&c))throw new RangeError("Unmatched lead surrogate at "+(n-1));o=((1023&o)<<10)+(1023&c)+65536,l=String.fromCharCode(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}null!==l&&(a>t&&(s+=i.slice(t,a)),s+=l,t=a=n+1)}return a>t&&(s+=i.slice(t,r)),s},this.twitterFollow=function(e){STRY.twitter.follows(e)},this.hasTouchEvents=function(){return!!("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)},this.isIOS=function(){return!(!/iPad|iPhone|iPod/.test(navigator.userAgent)||this.isIE())},this.isIE=function(){var e=navigator.userAgent.toLowerCase(),a=(t.getElementsByTagName("body")[0],!1);return-1!=e.indexOf("msie")?a=parseInt(e.split("msie")[1]):-1!=e.indexOf("trident")&&-1!=e.indexOf("rv:")&&(a=parseInt(e.split("rv:")[1])),a},this.isWebKit=function(){var e=/AppleWebKit\/([\d.]+)/.exec(navigator.userAgent);return e?parseFloat(e[1]):null},this.getQueryString=function(t){var a=new RegExp("[?&]"+t+"=([^&]*)").exec(e.location.search);return a&&decodeURIComponent(a[1].replace(/\+/g," "))},this.getUrlPrefix=function(t){var a,r;return(a=void 0!==t&&t?e.location.hash.indexOf("/"+t):e.location.hash.indexOf("/id:"))>-1?"#"!==(r=e.location.hash.substr(0,a))&&"#!"!==r||(r+="/"):e.location.hash?"/"!==(r=e.location.hash).charAt(r.length-1)&&(r+="/"):r="#!/",r},this.replacePrefix=function(e){var t,a=this.getUrlPrefix(),r=a.substr(a.length-1);return a&&a.length&&"#!/"!==a?(t=e.substring(e.indexOf("id:")),t="/"!==r?a+"/"+t:a+t):e},this.getDataAttribute=function(e,t,r){var i=r||5,s=e;if(s.nodeName&&"a"===s.nodeName.toLowerCase()&&!s.getAttribute(t)&&s.getAttribute("href"))return{element:s,action:"default"};for(;i--;){if(t==STRY.resources.data_track&&s&&s.getAttribute(STRY.resources.data_action))return{element:s,action:s.getAttribute(t)};if(s&&"#document"!==s.nodeName&&s.getAttribute(t))return{element:s,action:s.getAttribute(t)};s.parentNode&&(s=s.parentNode)}return{element:a,action:a}},this.getClosest=function(e,t){return e&&(t(e)?e:this.getClosest(e.parentNode,t))},this.getHostUrl=function(e){if(!e)return!1;var t=e.replace(/^((\w+:)?\/\/[^\/]+\/?).*$/,"$1"),a=t.substr(t.indexOf("://")+3);return(a=a.replace("www.","")).length>3&&"/"===a[a.length-1]&&(a=a.substring(0,a.length-1)),a},this.formatPublishedItems=function(e){return STRY.formatter.blocks(e)},this.getDateObject=function(e){var t=this.getCrossBrowserDate(e),a={char3:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},r={char3:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],full:["January","February","March","April","May","June","July","August","September","October","November","December"]};return{unix:t.getTime(),date:{day:{number:t.getDate(),char3:a.char3[t.getDay()],full:a.full[t.getDay()]},month:{number:t.getMonth()+1,char3:r.char3[t.getMonth()],full:r.full[t.getMonth()]},year:{char2:t.getFullYear().toString().slice(-2),full:t.getFullYear()}},time:{milliseconds:t.getMilliseconds(),seconds:t.getSeconds(),minutes:t.getMinutes(),hours:t.getHours()}}},this.getCrossBrowserDate=function(e){var t=Date.parse(e);return new Date(t)},this.getViewport=function(){var a=e.innerWidth||t.documentElement.clientWidth||t.body.clientWidth,r=e.innerHeight||t.documentElement.clientHeight||t.body.clientHeight;return this.isIOS()&&(a=screen.width,r=screen.height,"undefined"==e.orientation||90!=e.orientation&&-90!=e.orientation||(a=screen.height,r=screen.width)),{w:a,h:r}},this.truncate=function(e,t,a,r){if(e&&"string"==typeof e&&t){var i=(e=r?e.substring(e.indexOf(a),e.indexOf(r)):e.substring(e.indexOf(a))).replace(/(<([^>]+)>)/gi,"");if(i.length>t){var s;i.length;for(s=t;s<i.length;s++)if(" "===i[s])return i.substring(0,s)+"...";return i.substring(0,t)+"..."}return e}},this.slugify=function(e){return e=e.replace(/[^\w\-]/g,"-").replace(/^\-/,"").toLowerCase()},this.escapeHTML=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return"string"==typeof e?e.replace(/[&<>"']/g,(function(e){return t[e]})):e},this.element=function(e){if(e)return"string"==typeof e?t.getElementById(e):"string"==typeof e.nodeName?e:void 0},this.addClass=function(e,t){if(t&&"string"==typeof t){var a=(t||"").split(r);if(1===e.nodeType)if(e.className){for(var i=" "+e.className+" ",s=e.className,n=0,o=a.length;n<o;n++)i.indexOf(" "+a[n]+" ")<0&&(s+=" "+a[n]);e.className=s.replace(/^\s+|\s+$/g,"")}else e.className=t}},this.removeClass=function(e,t){if(t&&"string"==typeof t||t===a){var s=(t||"").split(r);if(e&&1===e.nodeType&&e.className)if(t){t=(" "+e.className+" ").replace(i," ");for(var n=0,o=s.length;n<o;n++)t=t.replace(" "+s[n]+" "," ");e.className=t.replace(/^\s+|\s+$/g,"")}else e.className=""}},this.hasClass=function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},this.toggleClass=function(e,t){this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t)},this.log=function(e){STRY.debug&&"undefined"!=typeof console&&void 0!==console.log&&console.log("STRY -> "+e)},this.error=function(e){"undefined"!=typeof console&&void 0!==console.log&&("undefined"!==console.error?console.error("STRY -> "+e):this.log(e,!0))},this.warn=function(e){},this.getLength=function(e){return Object.keys(e).length},this.extend=function(){var e={},t=!1,a=0,r=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],a++);for(var i=function(a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t&&"[object Object]"===Object.prototype.toString.call(a[r])?0===Object.keys(a[r]).length?e[r]=a[r]:e[r]=STRY.util.extend(!0,e[r],a[r]):e[r]=a[r])};a<r;a++){var s=arguments[a];i(s)}return e},this.clone=function(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var a in e)t[a]=this.clone(e[a]);return t},this.applyConfig=function(e,t,a){var r,i={},s=STRY.util.clone(e);if(a?((i=STRY.util.extend(!0,s,a)).breakpoints&&(i.breakpoints=a.breakpoints),i.presets&&!0===i.presets.carousel&&(i.breakpoints={})):t?((i=STRY.util.extend(!0,s,t)).breakpoints&&(i.breakpoints=t.breakpoints),i.presets&&!0===i.presets.carousel&&(i.breakpoints={})):s&&(i=s),i.templates&&i.templates.location&&"string"==typeof i.templates.location&&(i.theme&&i.templates.version?i.templates.location=STRY.formatter.string(i.templates.location,{theme:i.theme,version:i.templates.version}):i.theme&&(i.templates.location=STRY.formatter.string(i.templates.location,{theme:i.theme,version:""}))),i.direct_upload)for(r in i.direct_upload)i.direct_upload[r].indexOf&&i.direct_upload[r].indexOf("{theme}")>-1?i.direct_upload[r]=STRY.formatter.string(i.direct_upload[r],{theme:i.theme}):i.direct_upload[r].indexOf&&0===i.direct_upload[r].indexOf("html/")&&(i.direct_upload[r]=i.templates.location+i.direct_upload[r]);return i},this.applyStyles=function(e){var a,r="//s3-eu-west-1.amazonaws.com/templates.storystream.it/",i={},s=t.getElementsByTagName("head")[0],n=function(){i.loaded+=1,i.loaded===i.total&&e.callback&&(e.callback(),i.loaded=0)};if("string"==typeof e&&e.indexOf(".css")>0)(a=t.createElement("link")).setAttribute("rel","stylesheet"),a.setAttribute("href",e),s.appendChild(a);else if(e.custom||e.template){var o;if(e.template&&e.template.location&&e.template.stylesheet)if(e.template.location.indexOf(r)>-1&&(e.template.location=e.template.location.replace(r,"//d7c4jjeuqag9w.cloudfront.net/")),"string"==typeof e.template.stylesheet&&e.template.stylesheet.indexOf(".css")>0)(o=e.template.stylesheet).indexOf("http")<0&&0!==o.indexOf("//")&&(o=e.template.location+o),i.loaded=0,i.total=1,(a=t.createElement("link")).setAttribute("rel","stylesheet"),a.setAttribute("href",o),a.setAttribute("data-stry-type","stylesheet"),a.addEventListener("load",n),s.appendChild(a);else if("object"==typeof e.template.stylesheet&&e.template.stylesheet.length>0){var l=e.template.stylesheet.length,c=0;if(a={},i.loaded=0,i.total=e.template.stylesheet.length,l)for(;l--;)(o=e.template.stylesheet[c]).indexOf("http")<0&&0!==o.indexOf("//")&&(o=e.template.location+o),a[l]=t.createElement("link"),a[l].setAttribute("rel","stylesheet"),a[l].setAttribute("href",o),a[l].setAttribute("data-stry-type","stylesheet"),a[l].addEventListener("load",n),s.appendChild(a[l]),c+=1}if("string"==typeof e.custom&&e.custom.length>4){var d=t.createElement("style");e.preview&&(d.id="StryCustomStyles"),8===this.isIE()?setTimeout((function(){d.styleSheet.cssText=e.custom}),100):d.textContent=e.custom,s.appendChild(d)}}},this.initialiseAnalytics=function(e){"storyboard"==e.app_type?scope.params.canDualWriteGA?(STRY.AnalyticsModules[scope.params.api.app_id+":GA4"].init(e),STRY.AnalyticsModules[scope.params.api.app_id+":GA"].init(e)):STRY.AnalyticsModules[e.api.app_id].init(e):scope.params.adobe_analytics?STRY.adobeAnalytics.init(e):STRY.googleAnalytics.init(e)},this.sendTrackEvent=function(e,t,a){if(t)try{a&&a.canDualWriteGA?(STRY.AnalyticsModules[t+":GA4"].track(e),STRY.AnalyticsModules[t+":GA"].track(e)):STRY.AnalyticsModules[t].track(e)}catch(e){}else a&&a.adobe_analytics?STRY.adobeAnalytics.track(e):STRY.googleAnalytics.track(e)},this.getDummyContentItems=function(e,t,a,r){var i={};for(var s in e.length&&(i=JSON.parse(JSON.stringify(e[0]))),i)i.hasOwnProperty(s)&&("[object Array]"===Object.prototype.toString.call(i[s])?i[s]=[]:i[s]="");for(var n=a.length;n--;){i[a[n]]=r}for(;t--;)e.push(i);return e},this.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},this.getComputedStyle=function(t){if(e.getComputedStyle)return e.getComputedStyle(t);function a(e,t,r,i){var s,n=t[r],o=parseFloat(n),l=n.split(/\d/)[0];return i=null!==i?i:/%|em/.test(l)&&e.parentElement?a(e.parentElement,e.parentElement.currentStyle,"fontSize",null):16,s="fontSize"==r?i:/width/i.test(r)?e.clientWidth:e.clientHeight,"em"==l?o*i:"in"==l?96*o:"pt"==l?96*o/72:"%"==l?o/100*s:o}function r(e,t){var a="border"==t?"Width":"",r=t+"Top"+a,i=t+"Right"+a,s=t+"Bottom"+a,n=t+"Left"+a;e[t]=(e[r]==e[i]==e[s]==e[n]?[e[r]]:e[r]==e[s]&&e[n]==e[i]?[e[r],e[i]]:e[n]==e[i]?[e[r],e[i],e[s]]:[e[r],e[i],e[s],e[n]]).join(" ")}function i(e){var t=e.currentStyle,i=a(e,t,"fontSize",null);for(var s in t)/width|height|margin.|padding.|border.+W/.test(s)&&"auto"!==this[s]?this[s]=a(e,t,s,i)+"px":"styleFloat"===s?this.float=t[s]:this[s]=t[s];return r(this,"margin"),r(this,"padding"),r(this,"border"),this.fontSize=i+"px",this}return i.prototype={constructor:i,getPropertyPriority:function(){},getPropertyValue:function(e){return this[e]||""},item:function(){},removeProperty:function(){},setProperty:function(){},getPropertyCSSValue:function(){}},function(e){return new i(e)}(t)},this.containsObjectValue=function(e,t,a){var r;for(r=0;r<a.length;r++)if(a[r][e]===t)return!0;return!1},this.nodeListToArray=function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a]);return t},this.addLoadEvent=function(e,t){var a=e.onload;"function"!=typeof e.onload?e.onload=t:e.onload=function(){a&&a(),t()}},this.mergeArrays=function(e,t){return t&&t.forEach((function(t){-1==e.indexOf(t)&&e.push(t)})),e},this.clearHTML=function(e){if(e)for(;e.firstChild;)e.firstChild.remove()},this.innerHTMLCleanse=function(e){var a=navigator.userAgent.indexOf("Safari")>-1;if(navigator.userAgent.indexOf("Chrome")>-1&&a&&(a=!1),a)for(var r=e.el.querySelectorAll("video"),i=null,s=0;s<r.length;s++)i=t.createElement("video"),[...r[s].attributes].forEach(e=>{i.setAttribute(e.nodeName,e.nodeValue)}),r[s].replaceWith(i)},this.hasValidLVSConfig=function(e){var t=!0,a=[];return e.hasOwnProperty("lvs_settings")||(t=!1,a.push("LVS settings")),e.lvs_settings.hasOwnProperty("video")&&e.lvs_settings.video.mp4_url||(t=!1,a.push("Uploaded video")),e.lvs_settings.hasOwnProperty("before_show")&&e.lvs_settings.before_show.poster||(t=!1,a.push("Before show poster")),e.lvs_settings.hasOwnProperty("live_show")&&e.lvs_settings.live_show.poster||(t=!1,a.push("Live show poster")),e.lvs_settings.hasOwnProperty("after_show")&&e.lvs_settings.after_show.poster||(t=!1,a.push("After show poster")),a.length&&console.log("This Storyboard is missing the following config required to run an LVS show: "+a.join(", ")),!(!e.lvs_settings.before_show||!e.lvs_settings.before_show.poster)||t}}function R(e){var t=/\{(\w+)\}/g,a=/\/\d+\/$/;function r(t,a,r){for(var i,s,n,o=t.length;o--;)if(t[o].sizes&&t[o].sizes.original?(s=t[o].sizes.original.height,i=t[o].sizes.original.width,t[o].sizes.original.orientation=i>s?"landscape":s>i?"portrait":"square"):(t[o].sizes.original={},t[o].sizes.original.orientation="square"),a&&a.params&&a.params.useCloudinaryDerivatives&&e.cloudinary.available(t[o].original)){a.params.customCloudinaryPreviewTransform&&e.cloudinary.set_custom_preview_transform(a.params.customCloudinaryPreviewTransform),n=a.params.customCloudinaryTransformsEnabled&&a.params.customCloudinaryTransforms?e.cloudinary.get_simple_urls(t[o].original,a.params):e.cloudinary.get_urls(t[o].original,a.params,a.base_dimension,r),"storyboard"==a.params.app_type&&"carousel"==a.params.type?t[o].preview=n.emm_carousel:a.params.presets&&a.params.presets.carousel?t[o].preview=n.carousel:(t[o].preview=n.preview,"digital-magazine"!=a.params.type&&"news-hub"!=a.params.type||(t[o].digital_magazine_small=n.digital_magazine_small,t[o].digital_magazine_large=n.digital_magazine_large)),a.params.customCloudinaryPreviewTransform&&(t[o].preview=n.customPreview);var l=t[o].preview.indexOf(t[o].original);t[o].preview_info_url="https:"+t[o].preview.substring(0,l)+"fl_getinfo/"+t[o].preview.substring(l),t[o].detail=n.detail}else t[o].preview=t[o].original,t[o].detail=t[o].original,"digital-magazine"!=a.params.type&&"news-hub"!=a.params.type||(t[o].digital_magazine_small=t[o].original,t[o].digital_magazine_large=t[o].original)}function i(e){return e.display_date.date.day.number+" "+e.display_date.date.month.char3+" "+e.display_date.date.year.full+" "+e.title}function s(e){return"youtube"!=e.feed_class&&"youku"!=e.feed_class&&(!(1==e.images.length&&!e.videos.length)&&(!(1==e.videos.length&&!e.images.length)&&(e.images.length+e.videos.length!=2||0!=e.images[0].order||!e.videos.length||0!=e.videos[0].order&&void 0!==e.videos[0].order)))}this.string=function(e,a){if(void 0===e||"string"!=typeof e)return"";if(void 0===a)return e;return e.replace(t,(function(e,t,r,i,s,n){return a[t]||e}))},this.blocks=function(e,t,a){if(e.meta&&e.meta.types)for(var r=e.meta.types.length;r--;)"Youtube"===e.meta.types[r].name&&(e.meta.types[r].name="YouTube"),"Rss"===e.meta.types[r].name&&(e.meta.types[r].name="RSS");for(var i=[],s=e.blocks?e.blocks:[{content_items:[e]}],n=0,o=s.length;n<o;n++)i=i.concat(this.formatDataArray(s[n].content_items,e.share_url,s[n].content_block_id,t,a,n));return i},this.formatDataArray=function(t,n,o,l,c,d){for(var u=[],p=0,m=t.length;m--;){var f=t[p];if(!f.sdk){if(f.content_block_id=o||f.content_item_id,n&&(f.share_url=n),f.created=e.util.getDateObject(f.created_date),f.published=e.util.getDateObject(f.publish_date),l&&l.params&&l.params.date_type&&"created"==l.params.date_type?f.display_date=f.created:f.display_date=f.published,f.feed_type&&(f.feed_class=f.feed_type.toLowerCase()),f.origin&&(f.feed_class=f.origin.toLowerCase()),"facebook"==f.feed_class&&f.videos.length>0&&!e.facebook.fb_added&&e.facebook.initialised&&(e.facebook.addFacebookSDK(),e.facebook.initFacebookSDK()),"twitter"!=f.feed_class||e.twitter.twitter_added||e.twitter.init(),f.feed_class&&"flickr"==f.feed_class&&(f.url=f.url.replace(a,"/")),l.params.username_links_to_post&&f.url){var _=f.url.split("/");"Facebook"==f.feed_type?f.url=_[0]+"//"+_[2]+"/"+_[3]:f.url=_[0]+"//"+_[2]+"/"+f.author}f.title=e.util.escapeHTML(f.title),"twitter"===f.feed_class&&(f.title=i(f)),"instagram"!==f.feed_class&&"instagram-user"!==f.feed_class&&"instagram-tagged"!==f.feed_class&&"instagram-hashtag"!==f.feed_class&&"youtube"!=f.feed_class||(f.body=f.body.replace(/(?:\r\n|\r|\n)/g,"<br/>"),null===f.author&&(f.author=f.source)),f.headline&&(f.review_headline=f.headline);var g=!!f.title&&e.util.truncate(f.title,50,l.params.snippet_truncate_start,l.params.snippet_truncate_end),y=!!f.body&&e.util.truncate(f.body,160,l.params.snippet_truncate_start,l.params.snippet_truncate_end),h=!!f.body&&e.util.truncate(f.body,260,l.params.snippet_truncate_start,l.params.snippet_truncate_end);if(g&&(f.headline=g),y&&(f.snippet=y),h&&(f.long_snippet=h),l.params.retain_full_length_title&&(f.headline=!!f.title&&f.title),f.images.length>0||void 0!==f.images.original){if(void 0!==f.images.original){var v=f.images;f.images=[],f.images.push(v)}c&&"digital-magazine"==l.params.type?r(f.images,l,0==d||1==d):r(f.images,l,!1)}if(f.feed_class&&"link"!==f.feed_class&&"image"!==f.feed_class&&"embed"!==f.feed_class&&"quote"!==f.feed_class&&"twitter"!==f.feed_class?f.is_shareable=!0:f.is_shareable=!1,f.feed_class&&"link"!==f.feed_class&&"image"!==f.feed_class&&"embed"!==f.feed_class&&"quote"!==f.feed_class&&"twitter"!==f.feed_class?f.is_deeplink=!0:f.is_deeplink=!1,l&&l.params&&(!0===l.params.retainArticleHeroImage||void 0!==l.params.no_base_cookies&&l.params.no_base_cookies)&&"Custom"===f.feed_type&&(f.content_type="image",f.videos=[],l.params.no_base_cookies)){f.body=f.body.replace(/<div class=\"video-container\">/gi,'<div class="video-container" style="display: none;">')}"video"===f.content_type&&(f.has_touch=e.util.hasTouchEvents()),"youtube"===f.feed_class||"vimeo"===f.feed_class||"custom"===f.feed_class||"url"===f.feed_class?f.view_class="is-article-view":"twitter"===f.feed_class||"vine"===f.feed_class?f.view_class="is-tweet-view":"link"===f.feed_class?f.view_class="is-promo-view":"image"===f.feed_class?f.view_class="is-image-view":"quote"===f.feed_class?f.view_class="is-quote-view":"embed"===f.feed_class?f.view_class="is-image-view":f.view_class="is-post-view";var S=e.util.getHostUrl(f.url);if(S&&S.length>3&&(f.source_host=S),f.tags){f.smart_goals={meta:{count:0,has_images:!1},data:[]};for(var b=f.tags.length;b--;){var w=f.tags[b];if("smart-goal"==w.type&&(f.smart_goals.data.push(w),!f.smart_goals.meta.has_images&&w.data.image&&(f.smart_goals.meta.has_images=!0)),"filename"==w.url_name)try{var k=w.data.value.split("."),T=k.length;f.file_extension=k[T-1]}catch(e){continue}}f.smart_goals.meta.count=f.smart_goals.data.length}if(l&&l.params&&!l.params.useLargeAvatars&&f.avatar_url&&(f.avatar_url=f.avatar_url+"?thumbnail"),f.avatar_url&&(f.avatar_url=f.avatar_url.replace("//live.storystream.it/av-p/","//d3pnu6wv3ahoms.cloudfront.net/")),s(f)){l.params.templates&&"//www.porsche.com/all/storystream/templates/social-hub/"==l.params.templates.location&&"instagram"==f.feed_class&&(f.videos=[],f.content_type="image");for(var R=[],C=f.videos.length,Y=0;Y<C;Y++){var x=f.videos[Y];void 0!==f.images[x.order]&&(x.thumbnail=f.images[x.order].original),R[x.order]=x}for(var A=0,L=f.images.length,E=!1;A<L;A++){var O=f.images[A],I=void 0===O.order?A:O.order;"Custom"==f.feed_type&&(O.order>0&&0==A&&(E=!0),E&&(I-=1)),void 0===R[I]&&(R[I]=f.images[A])}if(f.media=R,l.params.ccsb||f.toggle_custom_story_item)for(p=0;p<f.media.length;p++)if(void 0===f.media[p].embedded){f.cover_image=f.media.splice(p,1)[0];break}}(l.params.ccsb||f.toggle_custom_story_item)&&!f.cover_image&&f.images.length&&(f.cover_image=f.images[0]);var q="";q=f.feed_type.indexOf("instagram")>-1?"Instagram":"app-direct-upload"==f.feed_type?"Uploaded":f.feed_type.charAt(0).toUpperCase()+f.feed_type.slice(1);var D=l.language?l.language:l.params.language;D&&D.strings.post_by&&(f.author?f.alt_text=q+" "+D.strings.post_by+" "+f.author:f.alt_text=q+" "+D.strings.post_by+" "+D.strings.unknown_user),f.sdk=!0}if(!l.params.cookie_killswitch&&l&&l.params&&void 0!==l.params.no_base_cookies&&!l.params.no_base_cookies)if("storyboard"==l.params.app_type)u.push(f);else{if(!l.params.emm&&"review"==f.feed_type)continue;u.push(f)}else{if("youtube"===f.feed_class||"twitter"===f.feed_class||"facebook"===f.feed_class&&f.videos.length||!l.params.emm&&"review"==f.feed_type&&"storyboard"!==l.params.app_type)continue;u.push(f)}l&&l.params&&void 0!==l.params.no_cookies&&l.params.no_cookies&&f.videos.length&&"Facebook"===f.feed_type&&(f.content_type="image"),p+=1}return u}}function C(a,s){if(!(this instanceof C))return new C(a,s||{});var l,c=t.createElement("div");c.version="9.24.1",c.namespace="STRY",c.params=STRY.util.applyConfig(a,STRY.config,s),c.el=STRY.util.element(c.params.element_id),c.filterScope={},c.hasTouchEvents=STRY.util.hasTouchEvents(),c.poll=function(){l.poll()},c.loadMoreItems=function(){l.loadMore()},c.resetAndReload=function(){c.reset&&c.reset(),l.resetAndReload()},c.loadFallbackContent=function(e){l.loadFallbackContent(c.params.fallback_language_code,e)},c.redraw=function(){STRY.util.transmit(c,"onForceRedraw")},c.loadNewItems=function(){l.loadNew()},c.getItemById=function(e){return l.getItemById(e)},c.getItems=function(){return l.items},c.getFilters=function(){return l.getFilters()},c.loadItemById=function(e,t){e||!c.closeOpenItems?l.loadItemById(e,t):c.closeOpenItems()},c.setQuery=function(e){"string"==typeof e&&(c.params.query=e)},c.connection=function(e){STRY.util.connection(e)},c.resetFilters=function(){for(var e=0;e<STRY.resources.filter_types.length;e++){var t=STRY.resources.filter_types[e];c.filterScope[t]=[]}};var d=function(e){var t=!!e.type&&e.type;c.params.events&&c.params.events[t]&&"function"==typeof c.params.events[t]&&c.params.events[t](e)},u=function(){"undefined"==typeof OneTrust?setTimeout((function(){u()}),500):(OneTrust.OnConsentChanged(p),p())},p=function(){if(e.OnetrustActiveGroups||e.OptanonActiveGroups){var t=e.OnetrustActiveGroups?e.OnetrustActiveGroups.split(","):e.OptanonActiveGroups.split(","),a=0;c.params.cookie_categories.forEach((function(e){t.includes(e)&&(a+=1)})),a===c.params.cookie_categories.length?m(!1):0==c.params.no_base_cookies&&m(!0)}},m=function(e){c.params.no_base_cookies=e,c.params.cookieless_analytics=e;var t=c.params.api.app_id;STRY["app_"+t]=null,STRY["config_"+t].no_base_cookies=e,STRY["config_"+t].cookieless_analytics=e,STRY["app_"+t]=STRY.app(STRY["config_"+t])};return function(){if(c.addEventListener("documentHasUpdated",d),c.addEventListener("documentIsReady",d),c.addEventListener("documentIsUpdating",d),c.addEventListener("controlsAreReady",d),c.addEventListener("onItemLoading",d),c.addEventListener("onItemLoadingComplete",d),c.addEventListener("onLoadingComplete",d),c.addEventListener("onLoadingItems",d),c.addEventListener("onMoreItemsAvailable",d),c.addEventListener("onNoMoreItems",d),c.addEventListener("onPollingComplete",d),c.addEventListener("onPollingItems",d),c.addEventListener("popupHasClosed",d),c.addEventListener("popupHasOpened",d),"live-video"==c.params.type||c.params.api&&(l=new STRY.stream(c)),c.el){var e;for(var t in STRY.modules)STRY.util.hasClass(c.el,t)&&(e=STRY.modules[t]);e&&(e=new STRY[e](c)),new STRY.interactions(c)}var a,s,p;if(a=c&&c.params&&c.params.analytics,s=!(c.params.cookie_killswitch||void 0!==c.params.no_base_cookies&&c.params.no_base_cookies),p=c.params.cookieless_analytics,(a&&(s||!s&&p)||c.params.custom_data_layer)&&("storyboard"==c.params.app_type?(STRY.hasOwnProperty("AnalyticsModules")||(STRY.AnalyticsModules={}),c.params.custom_data_layer?(STRY.AnalyticsModules[c.params.api.app_id]=new o,c.params.events={popupHasClosed:function(){STRY.AnalyticsModules[c.params.api.app_id].track("VWBasic_LayerClose_Click",event.detail)}}):c.params.adobe_analytics?STRY.AnalyticsModules[c.params.api.app_id]=new r:!function(){var e="4"!==c.params.analytics.versions&&c.params.hasOwnProperty("GA4ID");return c.params.canDualWriteGA=e,e}()?"4"==c.params.analytics.version?STRY.AnalyticsModules[c.params.api.app_id]=new n:STRY.AnalyticsModules[c.params.api.app_id]=new i:(STRY.AnalyticsModules[c.params.api.app_id+":GA4"]=new n,STRY.AnalyticsModules[c.params.api.app_id+":GA"]=new i),c.params.canDualWriteGA?(STRY.AnalyticsModules[c.params.api.app_id+":GA4"].init(c),STRY.AnalyticsModules[c.params.api.app_id+":GA"].init(c)):STRY.AnalyticsModules[c.params.api.app_id].init(c)):c.params.adobe_analytics?STRY.adobeAnalytics.init(c):STRY.googleAnalytics.init(c)),c&&c.params&&!c.params.cookie_killswitch){if(!c.params.no_base_cookies){var m=c.params.noFacebookFBroot,f=c.params.no_cookies||c.params.no_base_cookies;void 0!==f&&f||STRY.facebook.init(m)}c.params.no_base_cookies&&c.params.one_trust_website&&c.params.cookie_categories&&u()}c.smartGoalHandler||(c.smartGoalHandler=new STRY.smartgoals(c))}(),c}STRY.adobeAnalytics=new r,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryAdobeAnalyticsTasks=r),STRY.googleAnalytics=new i,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryGoogleAnalyticsTasks=i),STRY.googleAnalytics4=new n,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryGoogleAnalytics4Tasks=n),STRY.custom_data_layer=new o,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryCustomDataLayer=o),e.STRY&&(STRY.cloudinary=new l(e.STRY)),"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.CloudinaryResources=l),STRY.endpoints={livescreen:"/api/v2/{story_name}/search/latestpublished/.json?access_token={access_token}",published:{all:"/api/v2/{story_name}/search/published/.json?access_token={access_token}",since:"/api/v2/{story_name}/search/published/since/.json?access_token={access_token}&since_id={since_id}",item:"/api/v2/{story_name}/block/{item_id}.json?access_token={access_token}"},channel:{all:"/api/v4/{story_name}/{channel_id}/search/{workflow_state}/.json?access_token={access_token}",since:"/api/v4/{story_name}/{channel_id}/search/{workflow_state}/since/.json?access_token={access_token}&since_id={since_id}",item:"/api/v4/{story_name}/{channel_id}/{workflow_state}/item/{item_id}.json?access_token={access_token}"},channel_files:{all:"/api/v4/{story_name}/{channel_id}/{workflow_state}/search/all/.json?access_token={access_token}",since:"/api/v4/{story_name}/{channel_id}/{workflow_state}/search/all/since/.json?access_token={access_token}&since_id={since_id}",item:"/api/v4/{story_name}/{channel_id}/{workflow_state}/item/all/{item_id}.json?access_token={access_token}"},"app.hashtag_battle":"/api/v2/{story_name}/apps/battle/{app_id}/.json?access_token={access_token}","app.storystream_tv":"/api/v2/{story_name}/apps/tv/{app_id}/.json?access_token={access_token}"},e.STRY&&(STRY.cookie=new c),"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryCookieTasks=c),STRY.interactions=d,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryInteractions=d),STRY.fadeCarousel=u,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryFadeCarousel=u),STRY.mediaCarousel=p,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryMediaCarousel=p),STRY.loader=m,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryLoader=m),STRY.directUpload=f,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryDirectUpload=f),e.STRY&&(STRY.roi=_),"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryReturnOnInvestment=_),STRY.kenfits=g,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryKenFits=g),e.STRY&&(STRY.seo=new y(e.STRY)),"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StorySeo=y),STRY.VisualSmartgoals=h,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryVisualSmartgoals=h),STRY.facebook=new v,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryFacebookTasks=v),STRY.twitter=new S,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryTwitterTasks=S),STRY.resources={class_load_new_ready:"stry-new-items-ready",class_load_new_count:"stry-new-items-count",class_loading_message_wrapper:"stry-loading-message-wrapper",class_loading_message:"stry-loading-message",class_load_new:"stry-load-new",class_load_more:"stry-load-more",class_lookbook:"stry-lookbook",class_story_loading:"stry-loading",class_story_no_more_items:"stry-no-more-items",class_story_no_items_available:"stry-no-items-available",class_content:"stry-content",class_content_mask:"stry-content-mask",class_content_list:"stry-item-list",class_content_item:"stry-item",class_item_loading:"stry-item-loading",class_item_loaded:"stry-item-loaded",class_popup:"stry-popup",class_popup_item:"stry-popup-item",class_popup_enabled:"stry-can-popup",class_popup_disabled:"stry-no-popup",class_popup_active:"stry-is-popup",class_stry_in_focus:"stry-in-focus",class_sharing_active:"is-sharing",class_filter_container:"stry-filters",class_has_touch_events:"stry-has-touch-events",class_no_touch_events:"stry-no-touch-events",class_will_crop:"stry-will-crop",class_document_ready:"stry-document-ready",class_image_carousel:"stry-media-carousel",class_hub_carousel:"stry-hub-carousel",class_hub_carousel_outside_buttons:"stry-hub-carousel-outside-buttons",class_hub_carousel_wrapper:"stry-hub-carousel-content-wrapper",class_hub_carousel_button:"stry-hub-carousel-button",class_has_direct_upload:"stry-hub-has-direct-upload",class_direct_upload_popop:"stry-direct-upload-popup",class_direct_upload_popup_active:"stry-is-direct-upload-popup",class_fade_carousel:"stry-fade-carousel",class_fade_carousel_item:"stry-fade-carousel-item",class_fade_carousel_active_item:"stry-fade-active-item",class_fade_carousel_previous:"stry-fade-prev",class_fade_carousel_next:"stry-fade-next",class_fade_carousel_control:"stry-fade-carousel-control",data_block_id:"data-stry-block",data_action:"data-stry-action",data_direction:"data-stry-direction",data_link:"data-stry-link",data_filter_name:"data-stry-filter",data_filter_url:"data-stry-filter-url",data_track:"data-stry-track",filter_types:["types","categories"],ce_filter_types:["media_types","types","tags","categories"]},STRY.stream=b,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryStream=b),STRY.renderer=w,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryRenderer=w),function(t){"use strict";t.smartgoals=function a(r){if(!(this instanceof a))return new a(r||{});if(r){var i={visualSmartgoalsToggled:!0,initialToggle:!1,popupOpen:!1,willAnimateSmartGoals:function(){var e,t=(e="storyboard"==r.params.app_type?r.el.querySelectorAll(".list-item.has-smart-goals"):r.el.querySelectorAll(".smartgoal-enabled .stry-grid-smartgoal")).length;t&&function a(r){setTimeout((function(){s(e[t-r]),--r&&a(r)}),300)}(t)}},s=function(e){if("storyboard"==r.params.app_type)t.util.addClass(e,"promoted"),setTimeout((function(){t.util.removeClass(e,"promoted")}),3600);else{var a=t.util.getClosest(e,(function(e){return t.util.hasClass(e,"stry-grid-pane-item")}));t.util.addClass(a,"stry-hovered"),t.util.addClass(a,"promoted"),t.util.addClass(a,"auto-promoted"),setTimeout((function(){t.util.removeClass(a,"stry-hovered"),t.util.removeClass(a,"promoted"),t.util.removeClass(a,"auto-promoted")}),3600)}};return i.willConfigureSmartGoalHeights=function(e){for(var a=e&&e.is_hub?r.el.querySelectorAll(".stry-item-hover.smartgoal-hover"):r.el.querySelectorAll(".list-item.has-smart-goals"),i=a.length;i--;){var s=a[i].querySelectorAll(".stry-grid-smartgoal")[0];s&&s.offsetHeight>46&&t.util.addClass(a[i],"has-dual-line-smart-goals"),s&&r.params.smartgoals_always_visible&&t.util.addClass(a[i],"permanent-smartgoals")}},i.willHandlePopupSmartGoals=function(){var e=r.el.querySelectorAll(".stry-popup");e.length&&e[0].classList.add("active-smartgoals")},i.willToggleVisualSmartgoalState=function(){i.visualSmartgoalsToggled=!i.visualSmartgoalsToggled,i.toggleVisualSmartgoals()},i.toggleVisualSmartgoals=function(){for(var t=r.el.querySelectorAll(".stry-popup-outer"),a=t.length;a--;){if(e.innerWidth<=480){var s=t[a].querySelector(".stry-visual-smartgoal-outer");s&&(i.visualSmartgoalsToggled?s.style.maxHeight=s.scrollHeight+"px":s.style.maxHeight=0)}i.visualSmartgoalsToggled?t[a].classList.remove("visual-smartgoals-hidden"):t[a].classList.add("visual-smartgoals-hidden")}},i.willCollectVisualSmartgoalsWithHotspot=function(e){for(var t=e.length,a=[],r=0;r<t;r++)"smart-goal"==e[r].type&&e[r].data&&e[r].data.image&&e[r].data.has_coords&&e[r].data.co_ords&&e[r].data.co_ords.hasOwnProperty("x")&&e[r].data.co_ords.hasOwnProperty("y")&&a.push(e[r]);return a},i.willCollectVisualSmartgoalsCount=function(e){for(var t=e.length,a=0,r=0;r<t;r++)"smart-goal"==e[r].type&&e[r].data&&e[r].data.image&&a++;return 0==a&&(a=!1),a},i.willCollectVisualSmartgoals=function(a){for(var i=a.length,s=0,n=[],o=0;o<i;o++)if("smart-goal"==a[o].type&&a[o].data&&a[o].data.image){s+=1;var l={title:e.innerWidth<900?t.util.truncate(a[o].data.description,18):t.util.truncate(a[o].data.description,50),button_text:a[o].data.text,image:a[o].data.image,index:s,url:a[o].data.url,url_name:a[o].url_name,price:!!a[o].data.price&&a[o].data.price,has_coords:!!a[o].data.has_coords&&a[o].data.has_coords,coords:!!a[o].data.has_coords&&a[o].data.co_ords,custom_html:!!a[o].data.custom_html&&a[o].data.custom_html,live_video_timeline:!!a[o].data.live_video_timeline&&a[o].data.live_video_timeline};a[o].data.hasOwnProperty("catalogue")&&(l.title=a[o].text,l.button_text=r.language?r.language.strings.product_button_text:r.params.language.strings.product_button_text),n.push(l)}return n.length||(n=!1),n},i}t.util.error("StoryStreamSmartGoals -> scope must be defined.")}}(this.STRY=this.STRY||{}),function(a){"use strict";a.expandedTab=function r(i,s){if(!(this instanceof r))return new r(i||{});var n,o,l,c={};c.currentItemId;var d,u,p=!0,m=0;c.willRenderExpandedItems=function(t,a,r){var d;for(o=a.slice(0),l=e.innerWidth,n=0,d=o.length;d--;)if(t.id&&t.id==o[d].id||t.content_item_id==o[d].content_item_id){n=d;break}c.currentItemId=o[n].content_item_id,p=!r||!r.no_paginator;var u=!Y(),m=!x();if(l>480){p&&v(),u&&s.showItem(o[n-1],"left-side"),m&&s.showItem(o[n+1],"right-side");var f=setInterval((function(){var e=i.el.querySelectorAll(".stry-popup-outer").length;(2==e&&(!u||!m)||3==e&&u&&m)&&(clearInterval(f),h(),i.smartGoalHandler&&setTimeout((function(){i.smartGoalHandler.willHandlePopupSmartGoals()}),1500))}),100)}else{s.showItem(o[0]);var _=setInterval((function(){if(i.el.querySelectorAll(".stry-popup").length){clearInterval(_);for(var e=o.length;e-- >1;)s.showItem(o[e],e)}}),100)}},c.tabLeft=function(){var e,t,r,l=i.el.querySelectorAll(".stry-popup-outer"),d=l.length;for(n-=1,c.currentItemId=o[n].content_item_id,g(),C(),T(),p&&w();d--;)l[d].classList.add("can-animate"),l[d].classList.contains("right-side")?r=l[d]:l[d].classList.contains("left-side")?e=l[d]:t=l[d];if(t.classList.add("right-side"),t.classList.remove("active"),y(t),S(t,"right"),e.classList.remove("left-side"),e.style.transform="none",e.style.pointerEvents="none",setTimeout((function(){e.style.pointerEvents="auto"}),600),e.classList.add("active"),b(),r&&(r.style.transform="translateX(100%)",r.parentNode.removeChild(r)),setTimeout((function(){s.showItem(o[n-1],"left-side")}),600),i.params.analytics&&a.util.sendTrackEvent(["Content Item","tab",o[n].content_item_id],i.params.api.app_id,i.params),i.params.custom_data_layer){var m={};m.action="Content Item, tab, "+o[n].content_item_id,m.destination_url=o[n].deeplink_url,m.title=o[n].title,a.util.sendTrackEvent(m,i.params.api.app_id,i.params)}i.params.seo_utils_enabled&&(a.seo.willResetPopupMetaData(),a.seo.willUpdatePopupMetaData(o[n])),i.params.accessibility_features&&(u.close(),u=null,setTimeout((function(){var e=i.el.querySelector(".stry-popup-outer.active").querySelector('[role="dialog"]');aria&&(u=new aria.Dialog(e,null,i.el.querySelector(".stry-popup-outer.active .stry-desktop-meta .stry-author a")))}),700))},c.tabRight=function(){var e,t,r,l=i.el.querySelectorAll(".stry-popup-outer"),d=l.length;for(n+=1,c.currentItemId=o[n].content_item_id,g(),C(),T(),p&&w();d--;)l[d].classList.add("can-animate"),l[d].classList.contains("right-side")?r=l[d]:l[d].classList.contains("left-side")?e=l[d]:t=l[d];if(t.classList.add("left-side"),t.classList.remove("active"),y(t),S(t,"left"),r.classList.remove("right-side"),r.style.transform="none",r.style.pointerEvents="none",setTimeout((function(){r.style.pointerEvents="auto"}),600),r.classList.add("active"),b(),e&&(e.style.transform="translateX(-100%)",e.parentNode.removeChild(e)),setTimeout((function(){s.showItem(o[n+1],"right-side")}),600),i.params.analytics&&a.util.sendTrackEvent(["Content Item","tab",o[n].content_item_id],i.params.api.app_id,i.params),i.params.custom_data_layer){var m={};m.action="Content Item, tab, "+o[n].content_item_id,m.destination_url=o[n].deeplink_url,m.title=o[n].title,a.util.sendTrackEvent(m,i.params.api.app_id,i.params)}i.params.seo_utils_enabled&&(a.seo.willResetPopupMetaData(),a.seo.willUpdatePopupMetaData(o[n])),i.params.accessibility_features&&(u.close(),setTimeout((function(){u=null;var e=i.el.querySelector(".stry-popup-outer.active").querySelector('[role="dialog"]');aria&&(u=new aria.Dialog(e,null,i.el.querySelector(".stry-popup-outer.active .stry-desktop-meta .stry-author a")))}),700))};var f=function(){m++,e.innerWidth<=480&&m==o.length&&((d=i.el.querySelectorAll(".stry-popup")[0]).setAttribute("style","overflow-x:scroll !important; opacity: 1 !important"),d.scrollLeft=e.innerWidth*n,v(),k(d),i.smartGoalHandler&&setTimeout((function(){i.smartGoalHandler.willHandlePopupSmartGoals()}),1500),m=0)},_=function(){var e=i.el.querySelector(".stry-popup-outer.active"),t=e.querySelector('.tab-button[data-stry-action="tab.left"]'),a=e.querySelector('.tab-button[data-stry-action="tab.right"]');return t.style.display="block",t.setAttribute("tabindex",0),a.style.display="block",a.setAttribute("tabindex",0),[t,a]},g=function(){var e=_();e[0].style.display="none",e[0].setAttribute("tabindex",-1),e[1].style.display="none",e[1].setAttribute("tabindex",-1)},y=function(e){var t=e.querySelectorAll("video");t.length&&t[0].pause()},h=function(){var e=_();Y()?(e[0].classList.add("inactive"),e[0].setAttribute("tabindex",-1)):e[0].setAttribute("tabindex",0),x()?(e[1].classList.add("inactive"),e[1].setAttribute("tabindex",-1)):e[1].setAttribute("tabindex",0),i.params.accessibility_features&&(u=null,setTimeout((function(){var e=i.el.querySelector(".stry-popup-outer.active").querySelector('[role="dialog"]');aria&&(u=new aria.Dialog(e,null,i.el.querySelector(".stry-popup-outer.active .stry-desktop-meta .stry-author a")))}),100))},v=function(){if(A())w();else{var e=t.createElement("div");e.className="stry-paginator-container";for(var a,r=o.length,s=o.length-1;r--;)(a=t.createElement("div")).className="stry-paginator-entry",r==s-n&&(a.className+=" active"),e.appendChild(a);if(e.appendChild(a),l>480)var c=setInterval((function(){var t=i.el.querySelectorAll(".stry-popup");t.length&&(clearInterval(c),t[0].appendChild(e))}),100);else i.el.appendChild(e)}},S=function(e,t){var a=e.querySelectorAll(".stry-popup-item")[0].offsetWidth,r="left"==t?"translateX(-":"translateX(+",i=l>900?l-(l-a)/2-30+"px":"100%";e.style.transform=r+i+")"},b=function(){var e=_();Y()?(e[0].classList.add("inactive"),e[0].setAttribute("tabindex",-1)):1==n&&(e[0].classList.remove("inactive"),e[0].setAttribute("tabindex",0)),n==o.length-2?(e[1].classList.remove("inactive"),e[1].setAttribute("tabindex",0)):x()&&(e[1].classList.add("inactive"),e[1].setAttribute("tabindex",-1))},w=function(){for(var e=i.el.querySelectorAll(".stry-paginator-entry"),t=e.length;t--;)e[t].classList.remove("active");e[n]&&e[n].classList.add("active")},k=function(e){var t=a.util.debounce(R,100,!1,[{type:"scroll"}]);a.tabberScrollListener=t.bind(this),e.addEventListener("scroll",a.tabberScrollListener,{capture:!0,passive:!0})},T=function(){"storyboard"==i.params.app_type?i.params.hasDeeplink&&!i.appStoreMode&&history.pushState(null,null,o[n].deeplink_url):i.params.hasDeeplink&&!i.appStoreMode&&(e.location.hash=a.util.replacePrefix(o[n].deeplink_url))},R=function(){var t,r=i.el.querySelectorAll(".stry-popup")[0];e.clearTimeout(t),t=setTimeout((function(){var e=Math.floor(r.scrollLeft/l);if(e>n||n>e){if(n=e,p&&w(),T(),C(),i.params.analytics&&a.util.sendTrackEvent(["Content Item","tab",o[n].content_item_id],i.params.api.app_id,i.params),i.params.custom_data_layer){var t={};t.action="Content Item, tab, "+o[n].content_item_id,t.destination_url=o[n].deeplink_url,t.title=o[n].title,a.util.sendTrackEvent(t,i.params.api.app_id,i.params)}i.params.seo_utils_enabled&&(a.seo.willResetPopupMetaData(),a.seo.willUpdatePopupMetaData(o[n])),r.querySelectorAll("video").forEach(e=>{e.pause()})}}),50)},C=function(){i.el.classList.contains("stry-is-sharing")&&i.el.classList.remove("stry-is-sharing");for(var e=i.el.querySelectorAll(".stry-popup-item"),t=e.length;t--;)e[t].classList.remove("is-sharing")},Y=function(){return 0==n},x=function(){return n==o.length-1},A=function(){return 0!==i.el.querySelectorAll(".stry-paginator-container").length};return c.willHandleKeyRequest=function(e){[37,38,39,40].indexOf(e.keyCode)>-1&&e.preventDefault()},i.addEventListener("popupHasOpened",f),c}}(this.STRY=this.STRY||{}),STRY.filters=k,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryFilters=k),e.STRY&&(STRY.util=new T),"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryUtilities=T),e.STRY&&(STRY.formatter=new R(e.STRY)),"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.StoryFormatter=R),STRY.init=C,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.JavaScriptSDK=C)}(window,document); function storyboard(e){if(!(this instanceof storyboard))return new storyboard(e||{});var t={},a=null,r={app_type:"storyboard",analytics:{id:"UA-XXXXXXXX-1"},api:{story:"storyboard-test-cont",workflow_state:"live",story_id:"1885",app_id:"9251",environment:"//live.storystream.it",channel_id:"5ef4b9f1fc57bd02b5018ab4",token:"b5964baa7a61e760c84b4b8ccbe04cca6fdbf3de",version:"v4",type:"channel"},breakpoints:[{width:480,columns:1,rows:2},{width:760,columns:2,rows:2},{width:1200,columns:3,rows:2}],element_id:"stry-wrapper",limit:9,isChina:!1,roi_enabled:!1,sharing:{url_query:"rel=widget~id=0",app_id:"0",app_type:"widget"},theme:"advanced",templates:{version:"1.1.0",location:"//d7c4jjeuqag9w.cloudfront.net/grid/{theme}/{version}/",html:{item:"html/item.html",popup:"html/popup-item.html",menu:"html/menu.html",custom_story_item_popup:"html/story-popup-item.html"},stylesheet:"styles.css"},no_base_cookies:!1,cookie_killswitch:!1,show_grid_brand_messages:!1,show_popup_brand_messages:!1,track_storyboard_interactions:!0,smartgoals_always_visible:!1,seo_utils_enabled:!1,smartgoals_same_window:!1,show_smartgoal_hotspots_inline:!1,filters:{show:!1},direct_upload_enabled:!1,direct_upload:{button_template:"html/direct-upload-button.html",popup_template:"html/direct-upload-popup.html",tab_template_1:"html/direct-upload-tab-one.html",tab_template_upload_care:"html/direct-upload-tab-upload-care.html",tab_template_2:"html/direct-upload-tab-two.html",tab_template_3:"html/direct-upload-tab-three.html",tab_template_4:"html/direct-upload-tab-four.html",loading_template:"html/direct-upload-loading.html",error_template:"html/direct-upload-error-page.html",endpoint:"http://localhost:7070",uploadcare_publickey:"demopublickey"},hasDeeplink:!0,smartgoal_adobe_attribute_value:!1,us_date_format:!1,retain_full_length_title:!1,dynamic_product_page_mode:!1,product_group_mode:!1,type:"grid",useCloudinaryDerivatives:!0,previewMode:!1,lookbook:!1,hasDeeplinkCategories:!1,fallback_channel_id:null,fallback_language_code:null,storystream_credit:{inline:{enabled:!1,colour:"dark"},expanded:{enabled:!1,colour:"light"}},shopstream_credit:{header:{enabled:!1,colour:"dark"},footer:{enabled:!1,colour:"dark"}},block_videos_until_seen:!0,transitions_enabled:!0,transition_interval:7e3,mosaic:!1,locked_ratio_mode:!1,ratio_layout:"square",max_columns:3,car_crop:!0,customCloudinaryPreviewTransform:"smart_auto_crop",gutter:8,masonry_crop_to_fade:!1,kenfits:!1,carousel_crop:!1,digi_mag_carousel_letterbox:!1,adobe_analytics:!1,adobe_analytics_config:{pagename:"eVar1",app_id:"eVar2",event_type:"eVar3",content_id:"eVar4",smg_url_name:"eVar5",smart_goal_type:"eVar6",lvs_show_time_watched:"eVar7"}},s=[],i=[],n=0;t.popupIsOpen=!1,t.appStoreMode=!1;var o=function(){t.resetAndReload(),t.layout.resetLayout(),t.popup&&t.popup.resetPopup()},l=function(){t.layout.resetLayout(),t.popup&&t.popup.resetPopup()},p=function(e){var a=e.target||e.srcElement,r=a.getAttribute("data-stry-action"),s=a.getAttribute("data-stry-track");if(s&&d(a,s),!r){var i=a.closest("[data-stry-action]");"VIDEO"!=a.nodeName&&"stry-ff-event-blocker"!=a.classList||"grid"!=t.params.type||(i=a.closest(".list-item").getElementsByClassName("list-item-inner")[0]),i&&(r=i.getAttribute("data-stry-action"),a=i)}switch(s||d(a),r){case"popupOpen":"live-video"===t.params.type&&t.popupIsOpen&&t.params.pip_enabled?(t.el.querySelector(".stry-popup").classList.remove("stry-pip-enabled"),t.params.pip_enabled=!1,t.layout.setPipStorage(!1),t.popup.resetOverflowsOnPopup(),t.popup.setOverflowsOnPopup()):(t.popup.handleHashChangeClick(a),t.popupIsOpen=!0);break;case"popupClose":t.popup.closePopup(a),t.popupIsOpen=!1,"live-video"===t.params.type&&(t.chatService.persistingMessages=!0,t.params.pip&&(t.el.querySelector(".stry-popup").classList.remove("stry-pip-enabled"),t.el.querySelector(".stry-popup").classList.remove("stry-live-ended"),t.params.pip_enabled=!1,t.layout.setPipStorage(!1)));break;case"tab.right":t.tabber.tabRight();break;case"tab.left":t.tabber.tabLeft();break;case"shareOpen":case"shareClose":if("live-video"==t.params.type)return;if(t.popupIsOpen){var n=a.closest(".stry-popup-outer");n.classList.contains("is-sharing")?(t.el.classList.remove("stry-is-sharing"),n.classList.remove("is-sharing")):(t.el.classList.add("stry-is-sharing"),n.classList.add("is-sharing"))}else{var o=a.closest(".stry-item");if(o.classList.contains("is-sharing"))o.classList.remove("is-sharing");else t.el.querySelectorAll(".stry-item.is-sharing").forEach((function(e){e.classList.remove("is-sharing")})),o.classList.add("is-sharing")}break;case"toggleFilterMenu":t.filterMenuHandler.toggleFilterMenu();break;case"directUploadClose":"directUploadClose"!=e.target.getAttribute("data-stry-action")&&(r=(a=e.target||e.srcElement).getAttribute("data-stry-action"));break;case"toggle.visual.smartgoals":t.smartGoalHandler.willToggleVisualSmartgoalState();break;case"moveRight":t.layout.moveRight();break;case"moveLeft":t.layout.moveLeft()}STRY.util.transmit(t,"onClicked",{target:a,event:e,data:{element:a,action:r}})},d=function(e,a){if(a||(a=e.getAttribute("data-stry-track")),(t.params.analytics||t.params.custom_data_layer)&&a&&"default"!==a)if(t.params.custom_data_layer){var r=[];r.action=a,r.href=e.href,r.destination_url=e.getAttribute("data-stry-hash"),r.title=e.title,r.smartgoal_text=e.href?e.text:"",STRY.util.sendTrackEvent(r,t.params.api.app_id,t.params)}else STRY.util.sendTrackEvent(a,t.params.api.app_id,t.params)},c=function(n){if("live-video"!=(t=STRY.init(r,e)).params.type||STRY.util.hasValidLVSConfig(t.params)){switch(STRY.util.clearHTML(t.el),t.el.style.opacity="0",STRY.hasOwnProperty("popupHashChangeListeners")&&STRY.popupHashChangeListeners.hasOwnProperty(t.params.api.app_id)&&window.removeEventListener("hashchange",STRY.popupHashChangeListeners[t.params.api.app_id]),STRY.hasOwnProperty("layoutResizeListeners")&&STRY.layoutResizeListeners.hasOwnProperty(t.params.api.app_id)&&window.removeEventListener("resize",STRY.layoutResizeListeners[t.params.api.app_id]),STRY.hasOwnProperty("layoutVisibilityListeners")&&STRY.layoutVisibilityListeners.hasOwnProperty(t.params.api.app_id)&&window.removeEventListener("scroll",STRY.layoutVisibilityListeners[t.params.api.app_id],{capture:!0,passive:!0}),t.items=s,t.carouselItems=i,STRY.appversion="3.48.0",STRY.sdkversion=t.version,t.restart=o,t.appStoreMode=t.el.classList.contains("app-preview-window"),t.language=n,"1907"==t.params.api.story_id&&"www.boden.eu"==location.host&&STRY.util.addClass(t.el,"stry-boden-eu"),a&&t.params.pdp_xhr_config&&a.willListenForXHRProductChanges(t),a&&t.params.pdp_data_layer&&a.willListenForPageChange(t),t.renderer=new STRY.renderer(t),t.panes=STRY.panes(t),"live-video"==t.params.type&&(t.chatService=new STRY.chatService(t)),t.params.type){case"grid":t.el.classList.add("stry-grid-layout"),t.layout=STRY.grid(t);break;case"masonry":case"digital-magazine":case"news-hub":t.el.classList.add("stry-masonry-layout"),t.layout=STRY.masonry(t);break;case"carousel":t.el.className+=" stry-carousel-layout stry-earned-media-module ",t.layout=STRY.carousel(t);break;case"live-video":t.el.classList.add("stry-live-video-layout"),t.layout=STRY.liveVideo(t)}if(t.params.accessibility_features&&(t.el.classList.add("stry-accessible-mode"),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&t.el.classList.add("stry-firefox")),t.smartgoalHandler=new STRY.smartgoals(t),t.popup=new STRY.popup(t),t.brandingService=new STRY.brandingService(t),STRY.util.isIE()||"live-video"===t.params.type||(t.tabber=new STRY.expandedTab(t,t.popup)),t.el.onclick=p,t.hasTouchEvents=STRY.util.hasTouchEvents(),t.hasTouchEvents?STRY.util.addClass(t.el,STRY.resources.class_has_touch_events):STRY.util.addClass(t.el,STRY.resources.class_no_touch_events),t.params.roi_enabled&&(t.roiHandler=new STRY.roi(t)),t.params.kenfits&&(t.kenfitsHandler=new STRY.kenfits(t)),t.params.direct_upload_enabled&&t.params.direct_upload.terms_url&&t.params.direct_upload.endpoint&&t.params.direct_upload.uploadcare_publickey&&!STRY.util.isIE()){t.directUploadHandler=new STRY.directUpload(t);new STRY.directUploadInterface(t)}var d=t.language?t.language:t.params.language;if((d.strings.hasOwnProperty("header")&&d.strings.header.length>0||t.params.hasOwnProperty("banner_config"))&&t.brandingService.createHeader(d.strings.header,t.params.banner_config),d.strings.hasOwnProperty("footer")&&d.strings.footer.length>0&&t.brandingService.createFooter(d.strings.footer),t.params.storystream_credit&&t.params.storystream_credit.inline.enabled&&t.brandingService.createCredit(t.el,t.params.storystream_credit.inline.colour),t.params.shopstream_credit&&t.params.shopstream_credit.footer.enabled&&t.brandingService.createCredit(t.el,t.params.shopstream_credit.footer.colour+" shop-footer",!0),t.params.filters.show){new STRY.filters(t);t.filterMenuHandler=new STRY.filtersInterface(t),STRY.util.addClass(t.el,"stry-has-filters")}t.fadeCarouselHandler=new STRY.fadeCarousel(t),11==STRY.util.isIE()&&(STRY.util.addClass(t.el,"ie11"),t.ieVersion=11),t.resetDOM=l,STRY.util.applyStyles({template:t.params.templates,custom:t.params.stylesheets,callback:function(){t.params.shopstream_credit&&t.params.shopstream_credit.header.enabled&&t.brandingService.createCredit(document.querySelectorAll(".header")[0],t.params.shopstream_credit.header.colour+" shop-header",!0),STRY.util.transmit(t,"onStylesLoaded",{})}}),t.renderer.prefetchTemplate({template:t.params.templates.location+t.params.templates.html.popup}),t.params.accessibility_features&&(window.onkeyup=function(e){var a=(e.code,e.keyCode);if("13"==a||"Enter"==a){var r=e.target;if("VIDEO"==r.nodeName)return;var s=STRY.util.getDataAttribute(r,STRY.resources.data_action);if("popupOpen"===s.action&&"A"!=e.target.nodeName)p({action:"popupOpen",target:s.element});else if("popupClose"===s.action)p({action:"popupClose",target:s.element});else if("shareOpen"===s.action)e.target.click();else if("control-media-carousel"===s.action){var i=t.el.querySelector(".stry-media-carousel");STRY.util.transmit(i,"stryCarouselTickerClick",{target:s})}else"BUTTON"!=e.target.nodeName&&e.target.click()}if("27"==a||"Escape"==a){var n=t.el.querySelector(".stry-popup-close");n&&n.click();var o=t.el.querySelector(".stry-direct-upload-close-link");o&&o.click()}t.params.presets&&t.params.presets.carousel&&("9"!=a&&"Tab"!=a||(e.shiftKey?STRY.util.transmit(t,"stryCarouselTabbed",{dir:"left"}):STRY.util.transmit(t,"stryCarouselTabbed",{dir:"right"})))})}},u=function(){var a=!!t.elementAttributeReaderHandler&&t.elementAttributeReaderHandler.language;a||(a="en"==(a=document.getElementsByTagName("html")[0].getAttribute("lang"))?"en-GB":a);var s=a||"en-GB";r.fallback_language_code=a||null,function(t,a){var s="/:app_id/translation/:language/.json?access_token=:access_token",i=e.api&&e.api.environment?e.api.environment:r.api.environment,n={};s="//storystream.stystm"==i?"https://storystream.stystm/admin/apps/api"+s:"https://d3g5d7323c2i6m.cloudfront.net"+s;var o=e.api&&e.api.token?e.api.token:r.api.token,l=e.api&&e.api.app_id?e.api.app_id:r.api.app_id,p=new XMLHttpRequest;p.onreadystatechange=function(){if(4==p.readyState)if(200==p.status){var r=JSON.parse(p.responseText);n={code:t,strings:r.strings,categories:r.hasOwnProperty("categories")?r.categories:{}},a(n)}else e.full_lang_override?a(e.full_lang_override):console.warn("StoryStream translations could not be retrieved. Stopping StoryStream initialisation.")},p.open("GET",s.replace(":app_id",l).replace(":language",t).replace(":access_token",o),!0),p.send(null)}(s,c)},m=function t(a){var r=a.detail;if(e.pdp_data_layer||document.removeEventListener("STRY.onPDPConfigReady",t),r.productSKUs.length)e.hasOwnProperty("filters")||(e.filters={}),e.filters.products=r.productSKUs;else{if(!r.productGroup)return;e.hasOwnProperty("filters")||(e.filters={}),e.filters.productGroup=r.productGroup}u()},g=function(){var s,i,o=e.element_id?e.element_id:r.element_id;if(e.pip&&(s=localStorage.getItem("stry-pip"),i=JSON.parse(s),s&&(e.pip_enabled=i.enabled,i.progress&&(e.pip_progress=i.progress),i.play_state&&(e.pip_play_state=i.play_state)),e.hide_pip_inline_item=window.location.host+window.location.pathname!==e.pip_base_page&&window.location.host==e.pip_domain,e.pip_enabled&&e.hide_pip_inline_item)){var l=document.createElement("div");l.classList.add("stry-pip-hide"),l.id=o,document.body.appendChild(l)}STRY.util.element(o)?(t.elementAttributeReaderHandler=new STRY.elementAttributeReader(t,e,r),t.elementAttributeReaderHandler.tags.length?(e.hasOwnProperty("filters")||(e.filters={}),e.filters.tags=t.elementAttributeReaderHandler.tags):e.custom_domain_mappings&&e.custom_domain_mappings.hasOwnProperty("tags")&&e.custom_domain_mappings.tags.hasOwnProperty([window.location.host])&&(e.hasOwnProperty("filters")||(e.filters={}),e.filters.tags=e.custom_domain_mappings.tags[window.location.host]),e.custom_domain_mappings&&e.custom_domain_mappings.hasOwnProperty("streams")&&e.custom_domain_mappings.streams.hasOwnProperty([window.location.host])&&(e.hasOwnProperty("api")||(e.api={}),e.api.channel_id=e.custom_domain_mappings.streams[window.location.host]),e.dynamic_product_page_mode||r.dynamic_product_page_mode?(document.addEventListener("STRY.onPDPConfigReady",m),a=new STRY.dynamicProductPage(t,e,r)):u()):++n<20?setTimeout((function(){f()}),100):console.log("StoryStream DOM element took too long to load. Stopping StoryStream initialisation.")},f=function(){var t,a,r;e.api&&e.api.external_config_enabled&&"0"!==e.api.app_id?(t=e,a=function(){g()},(r=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&200==this.status&&(e=JSON.parse(this.responseText).config,a())},r.open("GET",t.api.storyboard_service_location+t.api.app_id+"?access_token="+t.api.token,!0),r.send()):g()};return f(),t}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var aria;function brandingService(e){if(!(this instanceof brandingService))return new brandingService(e||{});var t=this;t.hasRenderedHeader=!1,t.createHeader=function(r,s){void 0===r&&(r=""),s&&(r=a(s)+r),e.renderer.compile({template:'<div class="stry-wrapper-header">'+r+"</div>",callback:function(a){a.el&&(STRY.util.innerHTMLCleanse(a),e.el.prepend(a.el),t.hasRenderedHeader=!0)}})},t.createFooter=function(t){e.renderer.compile({template:'<div class="stry-wrapper-footer">'+t+"</div>",callback:function(t){t.el&&e.el.appendChild(t.el)}})},t.createCredit=function(t,a,r){var s=r?"?utm_source=shopstream&utm_medium=referral+&utm_campaign=shopstream":"";e.renderer.compile({template:'<a href="https://storystream.ai/'+s+'" target="_blank" class="stry-credit '+a+'"><span class="stry-credit-text">Powered By </span><span class="stry-credit-image"></span></a>',callback:function(e){e.el&&t&&t.appendChild(e.el)}})};var a=function(e){return bannerElement='<picture class="stry-banner">',e.mobile_image_url&&e.mobile_image_breakpoint&&(bannerElement+='<source style="max-width: 100%" media="(max-width:'+e.mobile_image_breakpoint+'px)" srcset="'+e.mobile_image_url+'">'),e.desktop_image_url&&e.mobile_image_breakpoint&&(bannerElement+='<source style="max-width: 100%" media="(min-width:'+e.mobile_image_breakpoint+'px)" srcset="'+e.desktop_image_url+'">',bannerElement+='<img style="max-width: 100%" src="'+e.desktop_image_url+'">'),bannerElement+="</picture>",bannerElement}}function directUploadInterface(e){if(!(this instanceof directUploadInterface))return new directUploadInterface(e||{});var t=function(){document.getElementById("stst_uploadcare_script")||e.directUploadHandler.applyUploadCare()};e.params.has_custom_direct_upload_button||e.renderer.compile({template:e.params.direct_upload.button_template,item:{localisation:e.language?e.language.strings:e.params.language.strings},callback:function(t){if(t.el)if(e.brandingService.hasRenderedHeader){var a=e.el.querySelector(".stry-wrapper-header");a.parentNode.insertBefore(t.el,a.nextSibling)}else{var r=e.el.getElementsByClassName("stry-direct-upload");r.length&&r[0].remove(),e.el.prepend(t.el)}}}),e.renderer.compile({template:e.params.direct_upload.popup_template,item:{localisation:e.language?e.language.strings:e.params.language.strings},callback:function(t){if(t.el){var a=e.el.getElementsByClassName("stry-direct-upload-popup");a.length&&a[0].remove(),e.el.prepend(t.el)}}}),e.addEventListener("onLoadingComplete",t)}function dynamicProductPage(e,t,a){if(!(this instanceof dynamicProductPage))return new dynamicProductPage(e,t,a||{});this.productSKUs=[],this.productGroup=null,this.pdp_xhr_config=null,this.product_group_mode=!1,this.observer=null;var r=(t.api&&t.api.story?t.api.story:a.api.story)+"-",s=this;s.willListenForXHRProductChanges=function(e){var t=window.XMLHttpRequest;window.XMLHttpRequest=function(){var a=new t;return a.addEventListener("readystatechange",(function(){if(4==a.readyState&&200==a.status&&-1!==a.responseURL.indexOf(e.params.pdp_xhr_config.fragment))try{var t=(new DOMParser).parseFromString(a.responseText,"text/html").querySelector(e.params.pdp_xhr_config.element);t&&t.value&&(s.productSKUs=[],s.productSKUs.push(r+t.value.split("-").join("").split("_").join("")),e.params.filters.products=s.productSKUs,e.resetDOM(),e.restart())}catch(e){}}),!1),a}},s.willListenForPageChange=function(e){var t=location.href;s.observer||(s.observer=new MutationObserver((function(){var a=location.href;a!==t&&(t=a,i(e))})),s.observer.observe(document,{subtree:!0,childList:!0}))};var i=function e(t){"eventIdSet"==window.dataLayer[window.dataLayer.length-1].event?(t.resetDOM(),t.restart(),n()):setTimeout(e.bind(void 0,t),100)},n=function i(){if(s.product_group_mode){var n=document.getElementById("tfa-params");if(n){var o=n.querySelector('[name="product_id"]');o&&o.value&&(s.productGroup=o.value)}}else if(s.pdp_xhr_config){var l=document.querySelector(s.pdp_xhr_config.element);l&&s.productSKUs.push(r+l.value.split("-").join("").split("_").join(""))}else if(s.pdp_data_layer_mode)for(var p=window.dataLayer.length-1;p>=0;p--){var d=window.dataLayer[p];if(d.event&&"productDetail"==d.event){d.ecommerce.detail.products.forEach((function(e){s.productGroup=e.dimension7}));break}}else{var c=e.elementAttributeReaderHandler.attributes.sku;if(c)s.productSKUs.push(r+c);else document.querySelectorAll('script[type="application/json"], script[type="application/ld+json"]').forEach((function(e){var t=JSON.parse(e.textContent);if(t.hasOwnProperty("@type")&&"product"==t["@type"].toLowerCase()){var a=null;t.hasOwnProperty("offers")&&t.offers.hasOwnProperty("sku")?a=t.offers.sku:t.hasOwnProperty("sku")&&(a=t.sku),a&&-1==s.productSKUs.indexOf(r+a)&&("homebase-"!=r?s.productSKUs.push(r+a):s.productSKUs.push(a))}}))}document.removeEventListener("DOMContentLoaded",i),function(){var e=t.filters&&t.filters.products?t.filters.products:[];s.productSKUs=STRY.util.mergeArrays(s.productSKUs,e);var r=t.element_id?t.element_id:a.element_id;document.querySelector("#"+r).classList.contains("app-preview-window")&&(s.productSKUs=t.previewModeProductSKU?[t.previewModeProductSKU]:[]),STRY.util.transmit(document,"STRY.onPDPConfigReady",{productSKUs:s.productSKUs,productGroup:s.productGroup})}()};s.pdp_xhr_config=t.pdp_xhr_config?t.pdp_xhr_config:a.pdp_xhr_config,s.product_group_mode=t.product_group_mode?t.product_group_mode:a.product_group_mode,s.pdp_data_layer_mode=!!t.pdp_data_layer&&t.pdp_data_layer,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}function elementAttributeReader(e,t,a){this.attributes={},this.tags=[],this.language=!1;var r,s=this,i=null,n=t.element_id?t.element_id:a.element_id;(i=document.getElementById(n))&&(Object.keys(i.dataset).map((function(e){s.attributes[e]=i.dataset[e]})),r=t.filters&&t.filters.tags?t.filters.tags:[],(s.attributes.stryTags&&s.attributes.stryTags.length?s.attributes.stryTags.split(","):[]).forEach((function(e){-1==r.map((function(e){return e.url_name})).indexOf(e)&&r.push({url_name:e})})),s.tags=r,s.language=!!s.attributes.stryLang&&s.attributes.stryLang)}function filtersInterface(e){if(!(this instanceof filtersInterface))return new filtersInterface(e||{});this.wrapper=e.el,this.filterMenuEl=null,this.filterMenuIsExpanded=!1;var t=this;t.toggleFilterMenu=function(){t.filterMenuEl.classList.contains("collapsed")?(t.filterMenuEl.classList.remove("collapsed"),t.filterMenuEl.classList.add("expanded"),t.filterMenuIsExpanded=!0):(t.filterMenuEl.classList.remove("expanded"),t.filterMenuEl.classList.add("collapsed"),t.filterMenuIsExpanded=!1)};var a=function(){if(e.params.filters||"channel"===e.params.api.type){var a=[],r=[],s=e.el.querySelector(".stry-filters");s&&s.parentNode.removeChild(s);var i=e.getFilters();if(i.categories.length&&"stry-emm-all"!==i.categories[0].url_name&&(e.params.custom_category_order&&-1===e.params.custom_category_order.indexOf("stry-emm-all")||i.categories.unshift({name:"all",url_name:"stry-emm-all",data:{}})),e.params.custom_category_order&&i.categories.length)for(var n=e.params.custom_category_order.length;n--;){-1==i.categories.map((function(e){return e.url_name})).indexOf(e.params.custom_category_order[n])&&e.params.custom_category_order.splice(n,1)}for(var o=0,l=!1,p=[],d=-1,c=0;c<STRY.resources.filter_types.length;c++){o=0,d=-1,r=[];var u=STRY.resources.filter_types[c];if(e.filterScope[u]&&(p=e.filterScope[u]),i[u]){for(var m=0;m<i[u].length;m++){for(var g=i[u][m],f=0;f<p.length;f++)if(p[f].url_name===g.url_name){l=!0;break}if("categories"==u){e.params.custom_category_order&&(d=e.params.custom_category_order.indexOf(g.url_name));var _=e.language?e.language:e.params.language;_.hasOwnProperty("categories")&&_.categories.hasOwnProperty(g.url_name)&&(g.name=_.categories[g.url_name]),e.params.custom_category_order?-1!==d&&(r[d]={name:g.name,url_name:g.url_name,selected:l}):r[o]={name:g.name,url_name:g.url_name,selected:l}}else r[o]={name:g.name,url_name:g.url_name,selected:l};o++,l=!1}a[u]=r}}if(a.localisation=e.language?e.language.strings:e.params.language.strings,a.categories.map((function(e){return e.selected})).indexOf(!0)<0&&a.categories.length)if(e.params.custom_category_order){var h=e.params.custom_category_order.indexOf("stry-emm-all");-1!=h?a.categories[h].selected=!0:a.categories[0].selected=!0}else a.categories[0].selected=!0;a.expanded=t.filterMenuIsExpanded,e.renderer.compile({template:e.params.templates.location+e.params.templates.html.menu,item:a,callback:function(a){if(a.el&&(t.filterMenuEl=a.el,!e.el.querySelectorAll(".stry-filters").length)){e.params.custom_category_order&&-1==e.params.custom_category_order.indexOf("stry-emm-all")&&t.filterMenuEl.classList.add("no-deselect");var r="carousel"==e.params.type?e.layout.carouselOuter:e.layout[e.params.type];"digital-magazine"!=e.params.type&&"news-hub"!=e.params.type||(r=e.layout.masonry),r.id?e.el.insertBefore(a.el,e.el.querySelector("#"+r.id)):e.el.insertBefore(a.el,r)}}})}};e.addEventListener("filtersReady",a)}function inlineHotspots(e,t,a){if(!(this instanceof inlineHotspots))return new inlineHotspots(e,t,a||{});var r=null,s=null,i=null,n=!1,o=[];this.animateSpots=function(){var e=o.filter((function(e){return e.visible})),t=e.length;t&&function a(r){setTimeout((function(){d(e[t-r].el),e[t-r].active=!0,e[t-r].el.classList.add("animating"),--r&&a(r)}),100)}(t)};var l,p,d=function(e){e.addEventListener("animationend",(function(){e.classList.remove("animating")}))},c=function(){for(var e=o.length,t=0;t<e;t++){r.input.height,r.input.width;var a=o[t].originalCoords.x,i=o[t].originalCoords.y;r.resize.length&&r.resize.forEach((function(e){e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&e.hasOwnProperty("width")&&e.hasOwnProperty("height")&&(a-=e.x,i-=e.y),e.hasOwnProperty("x_factor")&&e.hasOwnProperty("y_factor")&&(a*=e.x_factor,i*=e.y_factor)}));var n=a/r.output.width*100,l=i/r.output.height*100;o[t].visible=u(n,l),o[t].el.style.left="calc("+n+"%)",o[t].el.style.top="calc("+l+"%)",o[t].applied||(s.parentNode.insertBefore(o[t].el,s),o[t].applied=!0)}},u=function(e,t){var a=!0;return(e>100||t>100||e<0|t<0)&&(a=!1),s.offsetHeight*(t/100)>i.offsetHeight&&(a=!1),s.offsetWidth*(e/100)>i.offsetWidth&&(a=!1),a};l=t.item_data.images[0].preview_info_url,(p=new XMLHttpRequest).onreadystatechange=function(){if(4==p.readyState&&200==p.status){var e=JSON.parse(p.responseText);r=e,n&&r&&c()}},p.open("GET",l,!0),p.send(null),s="grid"==e.params.type?t.el.querySelector(".main-image"):t.el.querySelector(".stry-image-scale"),i=function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}(t.el,"stry-pane"),function(){for(var e=a.length,t=0;t<e;t++){var r=document.createElement("div"),s=document.createElement("span"),i=document.createElement("span");r.classList.add("stry-spot"),s.classList.add("stry-spot-outer"),r.appendChild(s),i.classList.add("stry-spot-inner"),r.appendChild(i),o.push({el:r,originalCoords:a[t].data.co_ords,applied:!1})}}(),STRY.util.addLoadEvent(s,(function(){(n=!0)&&r&&c()}))}function popup(e){this.isMobile=!1;var t=document.createElement("div");t.classList.add("stry-popup"),e.params.digi_mag_carousel_letterbox&&t.classList.add("stry-popup-carousel-letterbox"),e.params.pip&&t.classList.add("stry-pip"),e.params.pip_enabled&&t.classList.add("stry-pip-enabled"),t.style.display="none",e.layout.wrapper.appendChild(t),this.popupOuter=t,this.popupsToRender=0,this.popupsRendered=0,this.directDeeplinkContentItemId=null;var a=this,r=document.getElementsByTagName("html")[0],s=r.style.overflow,i=document.getElementsByTagName("body")[0],n=i.style.overflow,o=[],l=null;a.handleHashChangeClick=function(t){var a=t.getAttribute("data-stry-hash");e.params.hasDeeplink&&!e.appStoreMode?window.location.hash=STRY.util.replacePrefix(a):p(!1,a)},a.closePopup=function(t){var r=l;if(t){var s=t.getAttribute("data-stry-hash");e.params.hasDeeplink&&(window.location.hash=s)}for(e.layout.wrapper.classList.remove("stry-is-popup"),a.popupOuter.style.display="none";a.popupOuter.firstChild;)a.popupOuter.removeChild(a.popupOuter.firstChild);e.carouselItems=[],STRY.util.removeClass(document.getElementsByTagName("html")[0],"stry-widget-is-popup"),h();var i=e.el.querySelector(".stry-paginator-container");if(i&&i.parentNode.removeChild(i),e.tabber&&window.removeEventListener("keydown",e.tabber.willHandleKeyRequest),e.params.seo_utils_enabled&&STRY.seo.willResetPopupMetaData(),e.smartGoalHandler.popupOpen=!1,o=[],e.layout.isInView||e.params.pip_enabled||d(),a.popupsRendered=0,a.popupsToRender=0,e.params.accessibility_features){var n=null;"grid"==e.params.type?n="list-item-inner":"masonry"!=e.params.type&&"carousel"!=e.params.type||(n="stry-item-hover");for(var p=e.el.getElementsByClassName(n),c=e.params.can_tab_expanded_content?e.tabber.currentItemId:l,u=p.length;u--;)if(p[u].getAttribute("data-stry-block")==c){p[u].focus(),expandedItem=null;break}}STRY.util.transmit(e,"popupHasClosed",{closed_item:r})},a.resetPopup=function(){for(e.layout.wrapper.classList.remove("stry-is-popup"),a.popupOuter.style.display="none";a.popupOuter.firstChild;)a.popupOuter.removeChild(a.popupOuter.firstChild);e.carouselItems=[],STRY.util.removeClass(document.getElementsByTagName("html")[0],"stry-widget-is-popup");var t=e.el.querySelector(".stry-paginator-container");t&&t.parentNode.removeChild(t),e.smartGoalHandler.popupOpen=!1,o=[],a.popupsRendered=0,a.popupsToRender=0};var p=function(t,r){var s=r||window.location.hash,i=-1!==s.indexOf("id:");if("onItemRenderingComplete"!=t.type||!e.popupIsOpen)if(i){for(;a.popupOuter.firstChild;)a.popupOuter.removeChild(a.popupOuter.firstChild);a.popupOuter.removeEventListener("scroll",STRY.tabberScrollListener,{capture:!0,passive:!0});var n=s.indexOf("/id:"),o=function(e){var t,a,r,s=e.replace("#","").split("/");if(s&&s.length>1)for(t=s.length,a=0,r=[];t--;)s[a]&&"!"!==s[a]&&r.push(s[a]),a+=1;return r&&r.length?r:void 0}(s.substr(n,s.length)),l=o[0].split(":")[1],p=o[1];"live-video"==e.params.type?c({detail:{data:{videos:[{url:e.params.lvs_settings.video.mp4_url?e.params.lvs_settings.video.mp4_url:"",hls_url:e.params.lvs_settings.video.hls_url?e.params.lvs_settings.video.hls_url:""}],tags:[],start_poster:e.params.lvs_settings.before_show.poster,end_poster:e.params.lvs_settings.after_show.poster}}}):e.loadItemById(l,p),e.popupIsOpen=!0,("onItemRenderingComplete"==t.type||"hashchange"==t.type&&-1!=t.newURL.indexOf("id:")&&-1!=t.oldURL.indexOf("id:"))&&(a.directDeeplinkContentItemId=l),e.layout.isInView||e.params.pip_enabled||d(),e.tabber&&window.addEventListener("keydown",e.tabber.willHandleKeyRequest)}else e.popupIsOpen&&(a.closePopup(),e.popupIsOpen=!1)},d=function(){e.el.scrollIntoView()},c=function(r){if(!r.detail.data.status){!a.directDeeplinkContentItemId||a.directDeeplinkContentItemId!=r.detail.data.id&&a.directDeeplinkContentItemId!=r.detail.data.legacy_block_id||(STRY.util.transmit(e,"onDirectDeeplink",{event:r,id:r.detail.data.content_item_id}),a.directDeeplinkContentItemId=null),e.panes.getCurrentlyVisibleAndOffScreenItems(),e.params.seo_utils_enabled&&STRY.seo.willUpdatePopupMetaData(r.detail.data),a.isMobile=window.innerWidth<=480,e.layout.wrapper.classList.add("stry-is-popup");var s={};if(s.no_paginator="masonry"==e.params.type&&!a.isMobile,a.isMobile){var i;switch(e.params.type){case"grid":i=e.panes.currentlyVisibleItems.concat(e.panes.offScreenItems.slice(0,4)),e.params.reverse_mosaic_column_layout&&(i=f(i)),e.popup.popupsToRender=i.length,e.tabber.willRenderExpandedItems(r.detail.data,i,s);break;case"masonry":case"digital-magazine":case"news-hub":i=e.layout.getMobileTabberItems(r.detail.data,e.panes.currentlyVisibleItems.concat(e.panes.offScreenItems)),e.popup.popupsToRender=i.length,e.tabber.willRenderExpandedItems(r.detail.data,i,s);break;case"carousel":i=e.panes.currentlyVisibleItems.concat(e.panes.offScreenItems),e.popup.popupsToRender=i.length,e.tabber.willRenderExpandedItems(r.detail.data,i,s);break;case"live-video":e.popup.popupsToRender=1,e.tabber.willRenderExpandedItems(r.detail.data,[r.detail.data],s)}}else{var n=e.panes.currentlyVisibleItems.concat(e.panes.offScreenItems);e.params.reverse_mosaic_column_layout&&(n=f(n));var o=n.map((function(e){return e.id})).indexOf(r.detail.data.id),l=n.map((function(e){return e.content_item_id})).indexOf(r.detail.data.content_item_id),p=o||l;e.popup.popupsToRender=0==p||p==n.length-1?2:3,1==n.length&&(e.popup.popupsToRender=1),u(r.detail.data,!1,(function(){e.tabber&&e.tabber.willRenderExpandedItems(r.detail.data,n,s),"live-video"==e.params.type&&(e.layout.setupLiveVideo(),e.chatService.whenPopupOpened()),e.params.storystream_credit&&e.params.storystream_credit.expanded.enabled&&e.brandingService.createCredit(t,e.params.storystream_credit.expanded.colour)}),!0)}}},u=function(t,s,i,n){var o=e.params.templates.location;if(t){o+=t.toggle_custom_story_item?e.params.templates.html.custom_story_item_popup:e.params.templates.html.popup;var l=e.language?e.language:e.params.language;l&&(t.localisation=l.strings?l.strings:{}),t.popup_position=s;var p=e.panes.willAddDeeplinkingAndRootUrl(t).deeplink_url;if(n&&e.params.hasDeeplink&&!e.appStoreMode&&(window.location.hash=p),STRY.util.addClass(r,"stry-widget-is-popup"),_(),t.tags.length&&e.params.show_popup_brand_messages){var d=t.tags.map((function(e){return e.type})).indexOf("brand-message");t.brand_message=-1!==d&&t.tags[d].data.message}if(t.tags.length&&e.params.smartgoal_utm_parameters&&(t.tags=e.panes.willHydrateSmartGoalUTM(t.tags)),e.params.lvs_override_tags&&(t.tags=e.params.lvs_override_tags),t.no_cookies=!(!e.params.cookie_killswitch&&!e.params.no_base_cookies),t.smartgoals_same_window=e.params.smartgoals_same_window,t.visual_smartgoals=e.smartGoalHandler.willCollectVisualSmartgoals(t.tags),"live-video"==e.params.type){t.visual_smartgoals=e.params.products,t.current_url=window.location.href,t.chat_terms_url=e.params.lvs_settings.chat_terms_url?e.params.lvs_settings.chat_terms_url:"#",t.chat_privacy_policy_url=e.params.lvs_settings.chat_privacy_policy_url?e.params.lvs_settings.chat_privacy_policy_url:"#";var c=document.createElement("video"),u=null;u=e.params.use_hls_video?Hls.isSupported()?"hls":c.canPlayType("application/vnd.apple.mpegurl")?"m3u8":"standard":"standard",t.video_format=u,e.video_format=u,t.app_id=e.params.api.app_id}t.hide_visual_smartgoals=!(e.smartGoalHandler&&e.smartGoalHandler.popupOpen&&window.innerWidth>480)||!e.smartGoalHandler.visualSmartgoalsToggled,t.smartgoal_adobe_attribute_value=!!e.params.smartgoal_adobe_attribute_value&&e.params.smartgoal_adobe_attribute_value,t.has_touch=!!e.hasTouchEvents,e.params.accessibility_features&&(t.accessibility_features=!0),t.toggle_custom_story_item&&(o=e.params.templates.location+e.params.templates.html.custom_story_item_popup),e.params.pip&&(t.pip=!0),"review"==t.feed_type&&(t.view_class="is-article-view",t.original.rating.star_rating.value&&(t.has_star_rating=!0,t.full_star_count=Math.floor(t.original.rating.star_rating.value),t.half_star_count=t.original.rating.star_rating.value-t.full_star_count>0?1:0,t.empty_star_count=5-(t.full_star_count+t.half_star_count)),t.url&&(t.body=t.original.preview)),t.us_date_format=!!e.params.us_date_format&&e.params.us_date_format,t.has_tab_arrows=!a.isMobile,i&&(t.callback=i),e.renderer.compile({template:o,item:t,callback:m})}};a.showItem=u;var m=function(r){if(!r.error){if(expandedItem=r.params.item.content_item_id,STRY.util.innerHTMLCleanse(r),t.appendChild(r.el),a.isMobile||(t.style.display="block"),r.params.item.popup_position?function(e,t){var a;switch(e){case"left-side":var r=t.querySelector(".stry-popup-item").offsetWidth;a=window.innerWidth>900?window.innerWidth-(window.innerWidth-r)/2-30+"px":"100%",t.classList.add(e),t.style.transform="translateX(-"+a+")";break;case"right-side":var s=t.querySelector(".stry-popup-item").offsetWidth;a=window.innerWidth>900?window.innerWidth-(window.innerWidth-s)/2-30+"px":"100%",t.classList.add(e),t.style.transform="translateX("+a+")";break;default:t.style.transform="translateX("+100*e+"%)",t.style.position="absolute",t.style.overflow="hidden"}}(r.params.item.popup_position,r.el):l=r.params.item.content_item_id,r&&"twitter"===r.feed_class&&STRY.util.twitterFollow(e.el),e.el.querySelector("."+STRY.resources.class_image_carousel))for(var s=e.el.querySelectorAll("."+STRY.resources.class_image_carousel).length;s--;)e.carouselItems.push(new STRY.mediaCarousel(e.el.querySelectorAll("."+STRY.resources.class_image_carousel)[s],{transition:"fade",time:5e3}));r.el&&r.params.item.visual_smartgoals&&r.params.item.visual_smartgoals.length&&"live-video"!==e.params.type&&o.push(new STRY.VisualSmartgoals(e,r.el,r.params.item));var i=r.el.querySelector(".stry-main-image");i?STRY.util.addLoadEvent(i,(function(){g(r.el)})):g(r.el),r.params.item.popup_position||r.el.classList.add("active"),window.innerWidth<=480&&STRY.util.transmit(e,"popupHasOpened",{target:e.el.querySelector("."+STRY.resources.class_popup),data:r.params.item}),setTimeout((function(){STRY.facebook.applyXFBMLreparse(e.el.querySelector(".stry-popup"))}),100),r.params.item.callback&&r.params.item.callback(),a.popupsRendered+=1,a.popupsRendered==a.popupsToRender&&setTimeout((function(){e.smartGoalHandler.toggleVisualSmartgoals(),e.smartGoalHandler.popupOpen=!0}),300)}},g=function(e){var t=e.querySelector(".stry-popup-item");t&&t.offsetHeight+160<window.innerHeight&&e.classList.add("is-vertically-centered")},f=function(e){for(var t=[],a=0;a<e.length;a+=3)t.push(e.slice(a,a+3));for(a=0;a<t.length;a++)if(a%2==0){var r=t[a].shift();t[a].push(r)}return[].concat.apply([],t)},_=function(){e.params.pip_enabled||(r.style.overflow="hidden"),"1907"==e.params.api.story_id||e.params.pip_enabled||(i.style.overflow="hidden")},h=function(){e.params.pip_enabled||(r.style.overflow=s),"1907"==e.params.api.story_id||e.params.pip_enabled||(i.style.overflow=n)};a.resetOverflowsOnPopup=function(){r.style.overflow=s,i.style.overflow=n},a.setOverflowsOnPopup=_,a.setOverflowsOnPopupClose=h;!function(){e.params.hasDeeplink&&(STRY.hasOwnProperty("popupHashChangeListeners")||(STRY.popupHashChangeListeners={}),STRY.popupHashChangeListeners[e.params.api.app_id]=p.bind(this),window.addEventListener("hashchange",STRY.popupHashChangeListeners[e.params.api.app_id]),e.addEventListener("onItemRenderingComplete",p)),e.addEventListener("onItemLoadingComplete",c)}()}function panes(e){if(!(this instanceof panes))return new panes(e||{});this.isAnimating=!1,this.panesToAnimate=[],this.currentPaneIndex=0,this.itemsRendered=0,this.paneInterval=null,this.currentlyVisibleItems=[],this.offScreenItems=[],this.currentInterval=e.params.transition_interval,this.itemTemplateLoaded=!1;var t=this;t.renderItemsIntoPanes=function(a,r,i){t.itemTemplateLoaded?s(a,r,i):e.renderer.prefetchTemplate({template:e.params.templates.location+e.params.templates.html.item},(function(){t.itemTemplateLoaded=!0,s(a,r,i)}))},t.startAnimatingPanes=function(){t.isAnimating=!0,e.layout.panes.forEach((function(e){e.items.length>1&&(t.panesToAnimate.push(e),i(e))})),t.panesToAnimate.length&&p()},t.stopAnimatingPanes=function(){t.isAnimating=!1,clearInterval(t.paneInterval)},t.resetAnimatingPanes=function(){t.currentPaneIndex=0,t.panesToAnimate=[],e.layout.panes.forEach((function(e){e.currentItem=0}))},t.willHydrateSmartGoalUTM=function(t){return t.forEach((function(t){if("smart-goal"==t.type){var a=new URL(t.data.url),r=a.search?a.search.substr(1).split("&"):[],s=r.map((function(e){return e.split("=")[0]}));Object.keys(e.params.smartgoal_utm_parameters).forEach((function(t){-1==s.indexOf(t)&&(r.push(encodeURIComponent(t)+"="+encodeURIComponent(e.params.smartgoal_utm_parameters[t])),s.push(t))})),a.search=r.join("&"),t.data.url=a.href}})),t},t.willAddDeeplinkingAndRootUrl=function(t){if(e.url_prefix=STRY.util.getUrlPrefix(),e.url_prefix&&e.url_prefix.length){var a=e.url_prefix.substr(e.url_prefix.length-1),r=void 0!==t.id?t.id:t.content_block_id;"live-video"==e.params.type&&(r=e.params.api.app_id,t.slug_name="event");var s="id:"+r+"/"+t.slug_name+"/";t.deeplink_url="/"!==a?e.url_prefix+"/"+s:e.url_prefix+s,t.root_url=e.url_prefix}return t},t.getCurrentlyVisibleAndOffScreenItems=function(){t.currentlyVisibleItems=[],t.offScreenItems=[],e.layout.panes.forEach((function(e){for(var a=0;a<e.items.length;a++)a==e.currentItem?t.currentlyVisibleItems.push(e.items[a].item_data):t.offScreenItems.push(e.items[a].item_data)}))};var a=function(a,r){if(t.willAddDeeplinkingAndRootUrl(a),a.smart_goals_enabled=r.el.classList.contains("stry-pane"),a.tags.length){if(e.params.show_grid_brand_messages){var s=a.tags.map((function(e){return e.type})).indexOf("brand-message");a.brand_message=-1!==s&&a.tags[s].data.message}if("news-hub"==e.params.type){var i=a.tags.map((function(e){return e.type})).indexOf("category");a.category=-1!==i&&a.tags[i]}e.params.smartgoal_utm_parameters&&(a.tags=t.willHydrateSmartGoalUTM(a.tags))}a.excerpt=!(!a.original||!a.original.preview)&&a.original.preview,!a.excerpt&&"Facebook"==a.feed_type||!a.excerpt&&a.feed_type.indexOf("instagram")>-1?a.excerpt=STRY.util.truncate(a.body,300):a.excerpt||"Twitter"===a.feed_type||(a.excerpt=a.title),a.excerpt||(a.excerpt=STRY.util.truncate(a.body,300)),a.excerpt&&(a.excerpt=STRY.util.truncate(a.excerpt,120)),"review"==a.feed_type&&a.original.rating.star_rating.value&&(a.has_star_rating=!0,a.full_star_count=Math.floor(a.original.rating.star_rating.value),a.half_star_count=a.original.rating.star_rating.value-a.full_star_count>0?1:0,a.empty_star_count=5-(a.full_star_count+a.half_star_count)),a.smartgoals_same_window=e.params.smartgoals_same_window,a.is_lookbook=e.params.lookbook,a.is_carousel="carousel"==e.params.type,a.no_cookies=!(!e.params.cookie_killswitch&&!e.params.no_base_cookies);var n=e.language?e.language:e.params.language;return n&&(a.localisation=n.strings),a.is_custom_image="image"==a.feed_class,a.visual_smartgoals=!!a.tags.length&&e.smartGoalHandler.willCollectVisualSmartgoalsCount(a.tags),a.smartgoal_adobe_attribute_value=!!e.params.smartgoal_adobe_attribute_value&&e.params.smartgoal_adobe_attribute_value,a.us_date_format=!!e.params.us_date_format&&e.params.us_date_format,e.params.accessibility_features&&(a.accessibility_features=!0),e.params.prevent_autoplay_video&&(a.prevent_autoplay_video=!0),a.block_videos_until_seen=!!e.params.block_videos_until_seen&&e.params.block_videos_until_seen,a},r=function(a,r,s,i,n,l){e.renderer.compile({template:e.params.templates.location+e.params.templates.html.item,item:a,itemIndex:r,paneIndex:s,callback:function(a){if(!a.error){a.params.paneIndex==a.params.itemIndex&&a.el.classList.add("active"),STRY.util.innerHTMLCleanse(a);try{n[a.params.paneIndex].el.appendChild(a.el)}catch(e){n[a.params.paneIndex].el.htmlContent(a.html)}if(n[a.params.paneIndex].items.push({el:a.el,index:a.params.itemIndex,item_data:a.params.item}),e.params.show_smartgoal_hotspots_inline){var r=n[a.params.paneIndex].items.length-1,s=e.smartGoalHandler.willCollectVisualSmartgoalsWithHotspot(a.params.item.tags);s.length>0&&0==a.params.item.videos.length&&a.params.item.images&&1==a.params.item.images.length&&!n[a.params.paneIndex].el.classList.contains("stry-small-pane")&&(n[a.params.paneIndex].items[r].hotspotHandler=STRY.inlineHotspots(e,n[a.params.paneIndex].items[r],s))}n[a.params.paneIndex].currentItem=0,t.itemsRendered+=1,t.itemsRendered==i.length&&o(n,l)}}})},s=function(e,s,i){var n=0;t.itemsRendered=0;for(var o=0;o<e.length;o++)e[o]=a(e[o],s[n]),r(e[o],o,n,e,s,i),++n==s.length&&(n=0)},i=function(e){e.el.onmouseenter=function(){e.isHovered=!0},e.el.onmouseleave=function(){e.isHovered=!1}},n=function(e,t){return e.index-t.index},o=function(t,a){l(t),a(t),e.smartgoalHandler.willConfigureSmartGoalHeights({is_hub:"masonry"==e.params.type||"carousel"==e.params.type}),STRY.util.transmit(e,"onItemRenderingComplete",{})},l=function(e){e.forEach((function(e){e.items.sort(n)}))},p=function(){t.paneInterval=setInterval((function(){var e;t.panesToAnimate[t.currentPaneIndex].isHovered||((e=t.panesToAnimate[t.currentPaneIndex]).items[e.currentItem].el.classList.remove("active"),d(e.items[e.currentItem].el),e.currentItem=e.currentItem<e.items.length-1?e.currentItem+1:0,e.items[e.currentItem].el.classList.add("active"),c(e.items[e.currentItem].el),u(e.items[e.currentItem].el),setTimeout((function(){e.items[e.currentItem].el.classList.add("promoted")}),750),setTimeout((function(){e.items[e.currentItem].el.classList.remove("promoted")}),3750)),t.currentPaneIndex=t.currentPaneIndex<t.panesToAnimate.length-1?t.currentPaneIndex+1:0}),t.currentInterval)},d=function(e){var t=e.querySelector("video");t&&!t.paused&&t.pause()},c=function(e){var t=e.querySelector("video");t&&!t.src&&t.dataset.src&&(t.src=t.dataset.src)},u=function(t){if(!e.params.prevent_autoplay_video){var a=t.querySelector("video");a&&a.play()}}}function grid(e){if(!(this instanceof grid))return new grid(e||{});this.wrapper=e.el;var t=document.createElement("div");t.id="stry-grid",this.wrapper.appendChild(t),this.grid=t,this.panes=[],this.currentBreakpoint=null,this.currentMinimumContent=0,this.isInView=!1,this.fallback_item=null;var a,r=this,s=e.params.transitions_enabled,i=!0,n=!1;r.resetLayout=function(){r.wrapper.classList.remove("mobile-snap"),r.grid.classList.add("stry-loading"),r.grid.classList.remove("stry-loaded"),r.panes=[],setTimeout((function(){STRY.util.clearHTML(r.grid),r.grid.style.width="",c(),h()}),600)};var o=function(t){var a=t.findIndex((function(e){return e.width>window.innerWidth}));return r.currentBreakpoint=-1!=a?t[a]:t[t.length-1],s=r.currentBreakpoint.transitions_disabled?!r.currentBreakpoint.transitions_disabled:e.params.transitions_enabled,i=!r.currentBreakpoint.smartgoal_initial_animation_disabled||!r.currentBreakpoint.smartgoal_initial_animation_disabled,r.currentMinimumContent=r.currentBreakpoint.minimum_limit?r.currentBreakpoint.minimum_limit:null,e.panes.currentInterval=r.currentBreakpoint.transition_interval?r.currentBreakpoint.transition_interval:e.params.transition_interval,r.currentBreakpoint},l=function(t){var r=p(t.parentElement)-16;return e.base_dimension=r>480&&e.params.mosaic?420:320,(a=Math.floor(r/e.base_dimension))>e.params.max_columns&&(a=e.params.max_columns),a},p=function e(t){return t.clientWidth>0?t.clientWidth:e(t.parentElement)},d=function(){e.popup.popupOuter.querySelectorAll(".stry-popup-outer.active.video").length||(g(),(!e.params.locked_ratio_mode&&r.currentBreakpoint.width!==o(e.params.breakpoints).width||e.params.locked_ratio_mode&&a!==l(r.wrapper))&&(STRY.util.clearHTML(r.grid),r.wrapper.classList.remove("mobile-snap"),r.grid.style.width="",r.panes=[],c(),h()))},c=function(){var t=o(e.params.breakpoints);t.mobile_snap&&(e.params.locked_ratio_mode=!1),e.params.locked_ratio_mode&&(t.columns=l(r.wrapper),r.wrapper.classList.add("stry-lrm-mode"),0==t.columns?(r.wrapper.style.width="100%",t.columns=1):r.wrapper.style.width=e.base_dimension*t.columns+e.params.gutter*(t.columns-1)+"px"),t.mobile_snap&&(r.wrapper.classList.add("mobile-snap"),r.grid.style.width="calc("+100*t.columns+"vw - "+48*t.columns+" + px)"),r.grid.style.gridColumnGap=e.params.gutter+"px",r.grid.style.gridRowGap=e.params.gutter+"px",e.params.mosaic?(r.grid.style.gridTemplateColumns="repeat("+2*t.columns+", 1fr)",r.grid.style.gridTemplateRows="repeat("+3*t.rows+", 1fr)"):(r.grid.style.gridTemplateColumns="repeat("+t.columns+", 1fr)",r.grid.style.gridTemplateRows="repeat("+t.rows+", 1fr)");window.innerWidth;for(var a=0;a<t.rows;a++)for(var s=0;s<t.columns;s++)if(e.params.mosaic){var i=document.createElement("div");i.classList.add("stry-pane");var n=document.createElement("div");n.classList.add("stry-small-pane");var p=document.createElement("div");p.classList.add("stry-small-pane"),e.params.reverse_mosaic_column_layout?s%2?m(i,n,p,a,s):u(i,n,p,a,s):s%2?u(i,n,p,a,s):m(i,n,p,a,s),e.params.locked_ratio_mode&&(r.calculateLRMPaneHeight(i),r.calculateLRMPaneHeight(n,!0),r.calculateLRMPaneHeight(p,!0)),r.grid.appendChild(i),r.grid.appendChild(n),r.grid.appendChild(p),r.panes.push({el:i,items:[]}),r.panes.push({el:n,items:[]}),r.panes.push({el:p,items:[]})}else{var d=document.createElement("div");d.classList.add("stry-pane"),e.params.locked_ratio_mode&&r.calculateLRMPaneHeight(d),r.grid.appendChild(d),r.panes.push({el:d,items:[]})}},u=function(e,t,a,r,s){e.style.gridArea=3*r+2+"/"+(2*s+1)+"/"+(3*r+4)+"/"+(2*s+3),t.style.gridArea=3*r+1+"/"+(2*s+1)+"/"+(3*r+1)+"/"+(2*s+2),a.style.gridArea=3*r+1+"/"+(2*s+2)+"/"+(3*r+1)+"/"+(2*s+3)},m=function(e,t,a,r,s){e.style.gridArea=3*r+1+"/"+(2*s+1)+"/"+3*(r+1)+"/"+(2*s+3),t.style.gridArea=3*(r+1)+"/"+(2*s+1)+"/"+(3*r+4)+"/"+(2*s+2),a.style.gridArea=3*(r+1)+"/"+(2*s+2)+"/"+(3*r+4)+"/"+(2*s+3)},g=function(){e.layout.panes.forEach((function(e){var t=e.el.offsetHeight,a=null,r=e.el.offsetWidth-t;a=r>20?"landscape-pane":Math.abs(r)<20?"square-pane":"portrait-pane",e.el.classList.remove("landscape-pane"),e.el.classList.remove("square-pane"),e.el.classList.remove("portrait-pane"),e.paneOrientation=a,e.el.classList.add(a),function(e){e.el.querySelectorAll(".main-image").forEach((function(t){"landscape-pane"==e.paneOrientation&&(t.className="main-image stry-image-scale normal",t.className=560<e.el.offsetHeight?"main-image stry-image-scale height100":"main-image stry-image-scale normal")}))}(e)}))},f=function(){(e.panes.stopAnimatingPanes(),e.panes.resetAnimatingPanes(),g(),_(),e.params.prevent_autoplay_video)||e.el.querySelectorAll(".active video").forEach((function(e){e.play()}));v(!0)},_=function(){e.el.style.opacity="1",r.grid.classList.remove("stry-loading"),r.grid.classList.add("stry-loaded"),STRY.util.transmit(e,"storyboardRendered",{})},h=function(t){var a=t&&t.detail.filters&&e.params.filters;if(!e.params.previewMode){if(t?e.items=t.detail.data:n=!0,r.currentMinimumContent&&e.items.length<r.currentMinimumContent&&!r.fallback_item){if(e.params.fallback_channel_id&&(e.items.length||e.params.fallback_always)){return void e.loadFallbackContent(1)}return STRY.util.clearHTML(r.grid),r.grid.style.width="",void(e.el.style.display="none")}e.el.style.display="block",a&&STRY.util.transmit(e,"filtersReady",{}),STRY.twitter&&!e.params.isChina&&t&&STRY.twitter.log(t.detail.data),r.panes.length&&e.panes.renderItemsIntoPanes(e.items,r.panes,f)}},y=function(t){!e.items.length&&e.params.fallback_always&&(e.items=t.detail.data),r.fallback_item=t.detail.data[0],STRY.twitter&&!e.params.isChina&&t&&STRY.twitter.log(t.detail.data),r.panes.length&&e.panes.renderItemsIntoPanes(e.items,r.panes,f)},v=function(t){var a=r.wrapper.getBoundingClientRect(),s=a.top,i=a.bottom,n=r.isInView;r.isInView=s<window.innerHeight-50&&i>=50,(n!==r.isInView||t)&&(r.isInView?STRY.util.transmit(e,"gridInView",{}):STRY.util.transmit(e,"gridOutOfView",{}))};r.calculateLRMPaneHeight=function(t,a){var r,s=0;switch(e.params.ratio_layout){case"portrait":r=1.25;break;case"landscape":r=.8;break;case"square":r=1}s=e.base_dimension*r;var i=e.params.gutter/2;s=a?s/2-i:s,t.style.height=s+"px"};!function(){c(),STRY.hasOwnProperty("layoutResizeListeners")||(STRY.layoutResizeListeners={}),STRY.layoutResizeListeners[e.params.api.app_id]=d.bind(this),window.addEventListener("resize",STRY.layoutResizeListeners[e.params.api.app_id]),e.addEventListener("onLoadingComplete",h),e.addEventListener("onFallbackLoadingComplete",y),e.addEventListener("gridOutOfView",(function(){s&&e.panes.isAnimating&&e.panes.stopAnimatingPanes()})),e.addEventListener("gridInView",(function(){s&&!e.panes.isAnimating&&e.panes.startAnimatingPanes(),e.el.classList.contains("stry-app-viewed")&&(e.el.classList.add("stry-inline-hotspots-promoted"),setTimeout((function(){e.el.classList.remove("stry-inline-hotspots-promoted")}),1500)),n&&e.params.accessibility_features&&(e.el.getElementsByClassName("list-item-inner")[0].focus(),n=!1)})),STRY.hasOwnProperty("layoutVisibilityListeners")||(STRY.layoutVisibilityListeners={}),STRY.layoutVisibilityListeners[e.params.api.app_id]=STRY.util.debounce((function(){v(!1)}),200,!1).bind(this),window.addEventListener("scroll",STRY.layoutVisibilityListeners[e.params.api.app_id],{capture:!0,passive:!0}),e.addEventListener("onViewed",(function(){e.el.classList.add("stry-app-viewed"),setTimeout((function(){e.el.classList.add("stry-visual-smartgoals-ready")}),4100),!e.params.smartgoals_always_visible&&i&&e.smartGoalHandler.willAnimateSmartGoals(),e.layout.panes.forEach((function(e){e.items.forEach((function(e){e.hasOwnProperty("hotspotHandler")&&e.hotspotHandler.animateSpots()}))})),e.params.block_videos_until_seen&&(e.el.querySelectorAll(".active video[data-src]").forEach((function(e){e.src=e.dataset.src})),e.params.block_videos_until_seen=!1),setTimeout((function(){e.el.classList.add("stry-inline-hotspots-ready")}),3600)}),600),e.addEventListener("onOutOfView",(function(){e.el.querySelectorAll(".active video").forEach((function(e){e.paused||e.pause()}))})),e.addEventListener("onEnterView",(function(){e.el.querySelectorAll(".active video").forEach((function(e){e.paused&&e.play()}))}))}()}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),a=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],s=0;s<a;){var i=t[s];if(e.call(r,i,s,t))return s;s++}return-1},configurable:!0,writable:!0}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){var a=e instanceof Node;t.appendChild(a?e:document.createTextNode(String(e)))})),this.insertBefore(t,this.firstChild)}})})),STRY.app=storyboard,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.storyboard=storyboard),(aria=aria||{}).Utils=aria.Utils||{},aria.Utils.remove=function(e){return e.remove&&"function"==typeof e.remove?e.remove():!(!e.parentNode||!e.parentNode.removeChild||"function"!=typeof e.parentNode.removeChild)&&e.parentNode.removeChild(e)},aria.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!=e.rel;case"INPUT":return"hidden"!=e.type&&"file"!=e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},(aria=aria||{}).Utils=aria.Utils||{},aria.Utils.IgnoreUtilFocusChanges=!1,aria.Utils.dialogOpenClass="has-dialog",aria.Utils.focusFirstDescendant=function(e){for(var t=0;t<e.childNodes.length;t++){var a=e.childNodes[t];if(aria.Utils.attemptFocus(a)||aria.Utils.focusFirstDescendant(a))return!0}return!1},aria.Utils.focusLastDescendant=function(e){for(var t=e.childNodes.length-1;t>=0;t--){var a=e.childNodes[t];if(aria.Utils.attemptFocus(a)||aria.Utils.focusLastDescendant(a))return!0}return!1},aria.Utils.attemptFocus=function(e){if(!aria.Utils.isFocusable(e))return!1;aria.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(e){}return aria.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},aria.OpenDialogList=aria.OpenDialogList||new Array(0),aria.getCurrentDialog=function(){if(aria.OpenDialogList&&aria.OpenDialogList.length)return aria.OpenDialogList[aria.OpenDialogList.length-1]},aria.closeCurrentDialog=function(){var e=aria.getCurrentDialog();return!!e&&(e.close(),!0)},aria.Dialog=function(e,t,a){this.dialogNode=e,this.dialogNode.parentNode.classList.contains("dialog-backdrop")?this.backdropNode=this.dialogNode.parentNode:(this.backdropNode=document.createElement("div"),this.backdropNode.className="dialog-backdrop",this.dialogNode.parentNode.insertBefore(this.backdropNode,this.dialogNode),this.backdropNode.appendChild(this.dialogNode)),this.backdropNode.classList.add("active"),this.focusFirst="string"==typeof a?document.getElementById(a):"object"==_typeof(a)?a:null;var r=document.createElement("div");this.preNode=this.dialogNode.parentNode.insertBefore(r,this.dialogNode),this.preNode.tabIndex=0;var s=document.createElement("div");this.postNode=this.dialogNode.parentNode.insertBefore(s,this.dialogNode.nextSibling),this.postNode.tabIndex=0,aria.OpenDialogList.length>0&&aria.getCurrentDialog().removeListeners(),this.addListeners(),aria.OpenDialogList.push(this),this.clearDialog(),this.dialogNode.className="default_dialog",this.focusFirst?this.focusFirst.focus():aria.Utils.focusFirstDescendant(this.dialogNode),this.lastFocus=document.activeElement},aria.Dialog.prototype.clearDialog=function(){Array.prototype.map.call(this.dialogNode.querySelectorAll("input"),(function(e){e.value=""}))},aria.Dialog.prototype.close=function(){aria.OpenDialogList.pop(),this.removeListeners(),aria.Utils.remove(this.preNode),aria.Utils.remove(this.postNode),this.dialogNode.className="hidden",this.backdropNode.classList.remove("active"),aria.OpenDialogList.length>0&&aria.getCurrentDialog().addListeners()},aria.Dialog.prototype.replace=function(e,t,a){aria.getCurrentDialog(),aria.OpenDialogList.pop(),this.removeListeners(),aria.Utils.remove(this.preNode),aria.Utils.remove(this.postNode),this.dialogNode.className="hidden",this.backdropNode.classList.remove("active");var r=t||this.focusAfterClosed;new aria.Dialog(e,r,a)},aria.Dialog.prototype.addListeners=function(){document.addEventListener("focus",this.trapFocus,!0)},aria.Dialog.prototype.removeListeners=function(){document.removeEventListener("focus",this.trapFocus,!0)},aria.Dialog.prototype.trapFocus=function(e){if(!aria.Utils.IgnoreUtilFocusChanges){var t=aria.getCurrentDialog();t.dialogNode.contains(e.target)?t.lastFocus=e.target:(aria.Utils.focusFirstDescendant(t.dialogNode),t.lastFocus==document.activeElement&&aria.Utils.focusLastDescendant(t.dialogNode),t.lastFocus=document.activeElement)}},window.openDialog=function(e,t,a){new aria.Dialog(e,t,a)},window.closeDialog=function(e){var t=aria.getCurrentDialog();t.dialogNode.contains(e)&&t.close()},window.replaceDialog=function(e,t,a){var r=aria.getCurrentDialog();r.dialogNode.contains(document.activeElement)&&r.replace(e,t,a)},STRY.brandingService=brandingService,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.brandingService=brandingService),STRY.directUploadInterface=directUploadInterface,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.directUploadInterface=directUploadInterface),STRY.dynamicProductPage=dynamicProductPage,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.dynamicProductPage=dynamicProductPage),STRY.elementAttributeReader=elementAttributeReader,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.elementAttributeReader=elementAttributeReader),STRY.filtersInterface=filtersInterface,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.filtersInterface=filtersInterface),STRY.inlineHotspots=inlineHotspots,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.inlineHotspots=inlineHotspots),STRY.popup=popup,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.popup=popup),STRY.panes=panes,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.panes=panes),STRY.grid=grid,"undefined"!=typeof module&&"undefined"!=typeof exports&&null!==exports&&(exports.grid=grid); 
STRY.app_12617 = STRY.app(STRY.config_12617);
